!(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element"),require("wgnhs-common"),require("@uirouter/core"),require("wgnhs-viz"),require("wgnhs-interact"),require("wgnhs-layout")):"function"==typeof define&&define.amd?define(["exports","lit-element","wgnhs-common","@uirouter/core","wgnhs-viz","wgnhs-interact","wgnhs-layout"],t):t((e=e||self).app={},e.common,e.common,e.common,e.lit,e.lit,e.lit)})(this,function(e,t,i,r,s,o,n){"use strict";const a=L.CircleMarker.extend({getEvents:function(){return{zoomend:this._restyle,filterpoints:this._filter}},_restyle:function(e){this.setRadius(a.calcRadius(e.target.getZoom()))},_filter:function(e){e.detail.resolve(this.feature.properties)?this.setStyle({stroke:!0,fill:!0}):this.setStyle({stroke:!1,fill:!1})},highlight:function(){this._activeBackup={color:this.options.color,stroke:this.options.stroke,fill:this.options.fill},this.setStyle({color:"var(--palette-active)",stroke:!0,fill:!0})},removeHighlight:function(){this._activeBackup&&(this.setStyle(this._activeBackup),this._activeBackup=null)}});a.calcRadius=(e=>Math.max(e/1.5,3));class l extends window.L.Evented{constructor(){super(),this.selected=!1,this._highlight=null;const e=this.map=L.map("map",{zoomControl:!1}).setView([45,-89.623861],7);this.el=document.querySelector("#map"),new L.Control.Zoom({position:"topright"}).addTo(e);var t=[L.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors',label:"OpenStreetMap Humanitarian"}).addTo(e),L.esri.basemapLayer("Imagery",{label:"Esri Satellite"})];e.addControl(L.control.basemaps({basemaps:t,tileX:0,tileY:0,tileZ:1}));Promise.all([window.fetch("https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/borehole_geophysics/MapServer/0/query?where=1%3D1&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&queryByDistance=&returnExtentsOnly=false&datumTransformation=&parameterValues=&rangeValues=&f=geojson").then(e=>e.json()).then(e=>({name:"Geophysical Log Data",color:"var(--palette-blue)",data:e})),window.fetch("https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/sediment_core/MapServer/0/query?where=1%3D1&text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&returnTrueCurves=false&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&resultOffset=&resultRecordCount=&queryByDistance=&returnExtentsOnly=false&datumTransformation=&parameterValues=&rangeValues=&f=geojson").then(e=>e.json()).then(e=>({name:"Quaternary Core Data",color:"var(--palette-green)",data:e}))]).then(t=>{this.layers=t.map(t=>L.geoJSON(t.data,{name:t.name,pointToLayer:function(i,r){return new a(r,{weight:2,color:t.color,radius:a.calcRadius(e.getZoom()),stroke:!1,fill:!1})}})),this.layers.forEach(e=>e.on("click",e=>{this._highlight!==e.propagatedFrom?this.fire("interaction",e.propagatedFrom.feature.properties):this.fire("interaction")})),this.layers.forEach(t=>t.addTo(e));let i={};this.layers.forEach(function(e,t,r){e.eachLayer(function(s){let o=s.feature.properties.Wid||s.feature.properties.WGNHS_ID,n=l.getSiteCode(s.feature.properties),a=s.feature.properties.Site_Name||s.feature.properties.SiteName,u=s.getLatLng(),c=i[n]||{Site_Code:n,Site_Name:a,Wid:o,Latitude:u.lat,Longitude:u.lng,point:s,datas:new Array(r.length)};s.feature.properties.Site_Code=n,s.feature.properties.Data_Type=e.options.name,c.datas[t]=s.feature.properties,i[n]=c})}),this._lookup=i,this.fire("init")})}static getSiteCode(e){return["Wid","WGNHS_ID","ID","Site_Code"].reduce((t,i)=>t||e[i],void 0)}getPoint(e){let t=null,i=this._lookup[l.getSiteCode(e)];return i&&(t=i.point),t}getSite(e){return this._lookup[l.getSiteCode(e)]}zoomToPoint(e){let t=this.getPoint(e);t&&this.map.setZoomAround(t.getLatLng(),15)}getHighlightPoint(){return this._highlight}setHighlightPoint(e){e?(this._highlight=e,this._highlight.bringToFront(),this._highlight.highlight()):this.clearSelection()}selectPoint(e){let t=null,i=this.getPoint(e);if(i){t=i.feature.properties,i!==this.getHighlightPoint()&&(this.clearSelection(),this.setHighlightPoint(i))}return t}selectSite(e){let t=this.getSite(e);return this.selectPoint(e),t}clearSelection(){this._highlight&&(this._highlight.bringToBack(),this._highlight.removeHighlight()),this._highlight=null}updatePoints(e){this.map.fire("filterpoints",{detail:{resolve:t=>e.reduce((e,i)=>{const r=l.getSiteCode(t),s=i.has(""+r);return e||s},!1)}})}setVisibility(e){e?(this.el.removeAttribute("data-closed"),this.map.invalidateSize()):this.el.setAttribute("data-closed",!0)}}class u{constructor(e){Object.assign(this,e),this.id||(this.id=i.genId())}activate(e){let t=null;const i=e.detail.checked;return e.toggleable&&i&&(t={id:e.id,resolve:function(t){return t[e.prop]===e.value}}),t}}class c{constructor(){this.id=i.genId()}get next(){return t.html`
      <input type="checkbox">
    `}handle(e){let t=null;return e.target.nextElementSibling.checked&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){return!!t[e.prop]}}),t}}class d{constructor(e){this.id=i.genId(),this.gtName=e?"after":"at least",this.ltName=e?"before":"less than"}get next(){return t.html`
      <select>
        <option value="gt">${this.gtName}</option>
        <option value="lt">${this.ltName}</option>
      </select>
      <input type="text">
    `}handle(e){let t=null;e.gt=((e,t)=>e>=t),e.lt=((e,t)=>e<t);const i=e[e.target.nextElementSibling.value],r=e.target.nextElementSibling.nextElementSibling.value;return r&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let s=!!t[e.prop];return s&&(s=i(t[e.prop],r)),s}}),t}}class p{constructor(){this.id=i.genId()}get next(){return t.html`
      <select ?disabled="${!this.options}">
        <option></option>
        ${this.options?this.options.map(e=>t.html`
        <option value="${e}">${e}</option>
        `):""}
      </select>
    `}init(e){this.options||(this.options=Array.from(e).sort())}handle(e){let t=null;const i=e.target.nextElementSibling.value;return i&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let r=!!t[e.prop];if(r){r=t[e.prop]===i}return r}}),t}}class h{constructor(e){this._aggrKeys=["County","Drill_Meth"],this.aggrData=[];for(let t of e)this.aggrData.push(h._gatherAggrData(t,this._aggrKeys));this.datas=this.aggrData.map(e=>e.data).reduce((e,t)=>e.concat(t),[]),this.uniques={},this._aggrKeys.forEach(e=>this.uniques[e]=new Set(this.datas.map(t=>t[e]).filter(e=>!!e)))}static _gatherAggrData(e,t){const i={aggr:{},data:[]};return e.eachLayer(function(e,r){let s={};t.forEach(function(t){s[t]=e.feature.properties[t],i.aggr[t]||(i.aggr[t]={});let r=i.aggr[t];s[t]&&"number"==typeof s[t]&&((!r.max||r.max<s[t])&&(r.max=s[t]),(!r.min||r.min>s[t])&&(r.min=s[t]))}),i.data.push(s)}),i}}const g=["Site_Code","Data_Type","SiteName","Site_Name","Wid","ID","County"],m={SiteName:{title:"Site Name",desc:""},Site_Name:{title:"Site Name",desc:""},Wid:{title:"WID",desc:""},ID:{title:"ID",desc:""},RecentLog:{title:"Most recent log (year)",desc:""},MaxDepth:{title:"Max depth (ft)",desc:""},Norm_Res:{title:"Normal Resistivity",desc:""},Caliper:{title:"Caliper",desc:""},Gamma:{title:"Natural Gamma",desc:""},SP:{title:"Spontaneous (Self) Potential",desc:""},SPR:{title:"Single Point Resistivity",desc:""},Spec_Gamma:{title:"Spectral Gamma",desc:""},Fluid_Cond:{title:"Fluid Conductivity",desc:""},Flow_Spin:{title:"Spinner Flow Meter",desc:""},Fluid_Temp:{title:"Fluid Temperature",desc:""},Fluid_Res:{title:"Fluid Resistivity",desc:""},OBI:{title:"Optical Borehole Image (OBI)",desc:""},ABI:{title:"Acoustic Borehole Image (ABI)",desc:""},Video:{title:"Video",desc:""},Drill_Year:{title:"Drill year",desc:""},Depth_Ft:{title:"Depth (ft)",desc:""},Drill_Meth:{title:"Drill Method",desc:""},Subsamples:{title:"Subsamples",desc:""},Photos:{title:"Core Photos",desc:""},Grainsize:{title:"Grainsize",desc:""}},f=[new u({title:"Site Information",open:!0,sections:[{fields:{County:{controls:[new p]},Site_Name:{controls:[new class{constructor(){this.id=i.genId()}get next(){return t.html`
      <input type="text">
    `}handle(e){let t=null;const i=(""+e.target.nextElementSibling.value).trim().toUpperCase();return i&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let r=!!t[e.prop];return r&&(r=(""+t[e.prop]).trim().toUpperCase().includes(i)),r}}),t}}]},Wid:{controls:[new class{constructor(){this.id=i.genId()}get next(){return t.html`
      <input type="text">
    `}handle(e){let t=null;const i=(""+e.target.nextElementSibling.value).trim().toUpperCase();return i&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let r=!!t[e.prop];return r&&(r=(""+t[e.prop]).trim().toUpperCase()===i),r}}),t}}]}}}]}),new u({title:"Geophysical Log Data",prop:"Data_Type",Data_Type:"Geophysical Log Data",toggleable:!0,active:!0,sections:[{fields:{RecentLog:{controls:[new d(!0)]},MaxDepth:{controls:[new d]}}},{title:"Geologic",fields:{Norm_Res:{controls:[new c]},Caliper:{controls:[new c]},Gamma:{controls:[new c]},SP:{controls:[new c]},SPR:{controls:[new c]},Spec_Gamma:{controls:[new c]}}},{title:"Hydrogeologic",fields:{Fluid_Cond:{controls:[new c]},Flow_Spin:{controls:[new c]},Fluid_Temp:{controls:[new c]},Fluid_Res:{controls:[new c]},Flow_HP:{controls:[new c]}}},{title:"Image",fields:{OBI:{controls:[new c]},ABI:{controls:[new c]},Video:{controls:[new c]}}}]}),new u({title:"Quaternary Core Data",prop:"Data_Type",Data_Type:"Quaternary Core Data",toggleable:!0,active:!0,sections:[{fields:{Drill_Year:{controls:[new d(!0)]},Depth_Ft:{controls:[new d]},Drill_Meth:{controls:[new p]}}},{title:"Analyses available",fields:{Subsamples:{controls:[new c]},Photos:{controls:[new c]},Grainsize:{controls:[new c]}}}]})],y="entry";class w extends t.LitElement{static get layoutName(){}static include(e,i){return t.html`<table-layout .info=${e} .context=${i}></table-layout>`}static get properties(){return{info:{type:Object},context:{type:Object}}}constructor(){super()}static get styles(){return t.css`
      [data-element="table"] {
        display: grid;
        grid-template-columns: 40% 1fr;
        grid-gap: var(--border-radius);
        margin: 0 var(--border-radius);
      }
      .label {
        font-weight: var(--font-weight-bold);
      }
    `}render(){return t.html`
      <div data-element="table">
        ${Object.entries(this.info).filter(e=>!g.includes(e[0])).map((e,i)=>t.html`
      <td class="label" title="${m[e[0]]?m[e[0]].desc:e[0]}">
        <label for="${this.context.genId(i)}" >
          ${m[e[0]]?m[e[0]].title:e[0]}
        </label>
      </td>
      <td class="detail" title="${m[e[0]]?m[e[0]].desc:e[0]}">
        <span id="${this.context.genId(i)}">
          ${e[1]}
        </span>
      </td>
    `)}
      </div>
    `}}customElements.define("table-layout",w);class v extends t.LitElement{static get layoutName(){return"Geophysical Log Data"}static include(e,i){return t.html`<log-layout .info=${e} .context=${i}></log-layout>`}static get properties(){return{info:{type:Object},context:{type:Object}}}constructor(){super()}static get styles(){return t.css`
    `}render(){return t.html`
    <table-layout .info=${this.info} .context=${this.context}></table-layout>
    <pdf-view-button
      .panel=${this.context.pdfpanel}
      src="${"https://data.wgnhs.wisc.edu/geophysical-logs/"+this.info.Wid+".pdf"}">
    </pdf-view-button>
    `}}customElements.define("log-layout",v);class b extends t.LitElement{static get layoutName(){return"Quaternary Core Data"}static include(e,i){return t.html`<table-layout .info=${e} .context=${i}></table-layout>`}static get properties(){return{info:{type:Object},context:{type:Object}}}constructor(){super()}static get styles(){return t.css`
    `}render(){return t.html``}}customElements.define("core-layout",b);const S=w,_=[S,v,b],x={getLayout:function(e){let t=_.find(t=>t.layoutName===e);return t||(t=S),t.include}};class $ extends t.LitElement{static get properties(){return{siteinfo:{type:Object},pdfpanel:{type:Object}}}constructor(){super(),this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=i.genId()),e[t]}})()}static get styles(){return t.css`
      .header {
        position: -webkit-sticky;
        position: sticky;
        top: 0px;
        background-color: var(--palette-white);
        padding: var(--font-size-extra-large) var(--border-radius);
        z-index: 10;
        width: 100%;
        box-sizing: border-box;
        display: flex;
        justify-content: space-between;
      }
      .header h1 {
        padding: 0;
        max-width: 70%;
        text-align: center;
      }
      .header i {
        font-size: var(--icon-size-large);
        color: var(--palette-accent);
        cursor: pointer;
      }
      
      [data-closed] {
        display: none;
      }
    `}renderData(e,t){return x.getLayout(t)(e,this)}render(){let e=this.siteinfo?this.siteinfo.Latitude:null,i=this.siteinfo?this.siteinfo.Longitude:null,r=this.siteinfo?this.siteinfo.Wid:null;return t.html`
      <style>
        @import url("./css/typography.css");
      </style>

      ${this.siteinfo?t.html`
        <div class="header">
          <span>
            <a href="${window.router.link("entry")}" onclick="event.preventDefault()"><i class="material-icons clear-selection" title="Clear selection" @click="${this.fireClearSelection}" >arrow_back</i></a>
          </span>
          <h1>${this.siteinfo.Site_Name}</h1>
          <span></span>
        </div>
        ${this.renderData({Latitude:e,Longitude:i,WID:r})}
        <h2>Data Available:</h2>
        ${this.siteinfo.datas.map(e=>t.html`
          <app-collapsible open>
            <span slot="header">${e.Data_Type}</span>
            <div slot="content">
              ${this.renderData(e,e.Data_Type)}
            </div>
          </app-collapsible>
        `)}
      `:""}
    `}fireClearSelection(){let e=new CustomEvent("clear-selection",{bubbles:!0,detail:{}});this.dispatchEvent(e)}}customElements.define("site-details",$);customElements.define("filter-summary",class extends t.LitElement{static get properties(){return{counts:{type:Array}}}constructor(){super()}static get styles(){return t.css`
    `}render(){return this.counts?t.html`
    <div>
      <span>Showing:</span>
      <ul>
        <li>
          <span>
          ${this.counts.reduce((e,t)=>t.current+e,0)}
          </span> of <span>
          ${this.counts.reduce((e,t)=>t.total+e,0)}
          </span> total sites
        </li>
        ${this.counts.map(e=>t.html`
        <li>
          <span>${e.current}</span> of <span>${e.total}</span> sites having <span>${e.name}</span>
        </li>
        `)}
      </ul>
    </div>
    `:t.html``}setCounts(e){this.counts=e}});class D extends t.LitElement{static get properties(){return{include:{type:Array,attribute:!1},filter:{type:Array,attribute:!1},matchClass:{type:String,attribute:!1},sources:{type:Array,attribute:!1}}}static get styles(){return t.css`
      .field {
        display: grid;
        grid-template-columns: 40% 1fr;
        grid-gap: var(--border-radius);
        margin: 0 var(--border-radius);
      }

      .label {
        font-weight: var(--font-weight-bold);
      }

      .selector {
      }

      .section-title {
        margin: var(--line-height) 0 0 0;
        padding: var(--border-radius);
        background-color: var(--palette-light);
      }

      in-radio {
        display: inline-grid;
        grid-template-columns: auto auto;
      }
    `}updateMatchClass(e){this.matchClass=e.target.choice}render(){return t.html`
      <style>
        @import url("./css/typography.css");
      </style>
      <div>
        <filter-summary></filter-summary>
      </div>
      <div>
        Show sites that have <in-radio choices='["ALL", "ANY"]' @choice-change="${this.updateMatchClass}"></in-radio> of the following:
      </div>
      <div>
        ${this.renderFilterGroups()}
      </div>
    `}resolveKeyLookup(e){return m[e]?m[e].title:e}renderFilterGroups(){return this.filterGroups.map(e=>t.html`
      <app-collapsible
        ?open=${e.open} @open=${this._handle(e)}>
        <i slot="header-before" class="material-icons">expand_more</i>
        <span slot="header">${e.title}</span>
        ${e.toggleable?t.html`
          <toggle-switch
            name="${e.mapName}"
            slot="header-after"
            ?checked=${e.active}
            @change=${this._handleGroup(e,"include")}
          ></toggle-switch>
        `:""}
        <div slot="content">
          ${e.sections.map((i,r)=>t.html`
            ${i.title?t.html`
              <h2 class="section-title">${i.title}</h2>
            `:""}
            ${Object.entries(i.fields).map((i,r)=>t.html`
              <div class="field">
              ${0===i[1].controls.length?"":i[1].controls.map(s=>t.html`
                <td class="label">
                  <label for="${this.genId(r)}" >
                    ${this.resolveKeyLookup(i[0])}
                  </label>
                </td>
                <td class="selector" 
                    @change="${this._handleControl(e,s,"filter")}">
                  <input
                    type="hidden"
                    id="${s.id}"
                    name="${i[0]}">
                  ${s.next}
                </td>
              `)}
              </div>
            `)}
          `)}
        </div>
      </app-collapsible>
    `)}get _eventHandlers(){return{open:(e,t)=>{e.open=t.detail.value}}}_handle(e){return t=>{const i=this._eventHandlers[t.type];i&&(i(e,t),this.requestUpdate("handle_"+t.type))}}_handleGroup(e,t){const i=e.id,r=e.activate.bind(e),s=this[t],o=this.requestUpdate.bind(this);return n=>{const a={};a.id=i,a.toggleable=e.toggleable,a.detail=n.detail,a.prop=e.prop,a.value=e[e.prop],C(s,i);let l=r(a);l&&s.push(l),o(t)}}_handleControl(e,t,i){const r=t.id,s=t.handle.bind(t),o=this[i],n=this.requestUpdate.bind(this);return t=>{const a={};a.id=r,a.group=e,a.target=t.currentTarget.querySelector("#"+r),a.prop=a.target.name,C(o,r);let l=s(a);l&&o.push(l),n(i)}}updated(e){const t=e.has("matchClass")||e.has("include")||e.has("filter")||e.has("sources");if(this.sources&&t){const e=D.runFilter({matchClass:this.matchClass,incl:this.include,filt:this.filter,sources:this.sources});this.$summary.setCounts(D.getResultsInfo(this.sources,e)),i.dispatch(this,"filtered",{activePoints:e})}}firstUpdated(){this.$summary=this.renderRoot.querySelector("filter-summary")}init(e,t){this.filterGroups.forEach(t=>{t.sections.forEach(t=>{Object.entries(t.fields).forEach(t=>{t[1].controls.forEach(i=>{i.init&&i.init(e[t[0]])})})})}),this.sources=t}static runFilter({matchClass:e,incl:t,filt:i,sources:r}){return r.map(r=>{const s=new Set;return Object.entries(r._layers).forEach(r=>{(function(r){let s=t.length>0&&t.reduce((e,t)=>e||t.resolve(r),!1),o=i.filter(e=>e.resolveGroup(r)),n=s&&o.length<1;return s&&!n&&(n="ALL"===e?o.reduce((e,t)=>e&&t.resolve(r),!0):o.reduce((e,t)=>e||t.resolve(r),!1)),n})(r[1].feature.properties)&&s.add(""+l.getSiteCode(r[1].feature.properties))}),s})}static getResultsInfo(e,t){return e.map((e,i)=>{let r={};r.name=e.options.name;let s=Object.entries(e._layers);return r.total=s.length,r.current=t[i].size,r})}constructor(){super(),this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=i.genId()),e[t]}})(),this.include=[],this.filter=[],this.filterGroups=f}}customElements.define("map-filter",D);const C=(e,t)=>{for(var i=e.findIndex(e=>e.id===t);i>=0;i=e.findIndex(e=>e.id===t))e.splice(i,1)};window.siteMap=new l,window.sidebar=document.querySelector("#sidebar"),window.pdfPanel=document.querySelector("#sketch"),document.querySelectorAll("site-details").forEach(function(e){e.pdfpanel=window.pdfPanel}),window.filter=document.querySelector("#filter"),window.siteMap.once("init",function(){window.siteData=new h(window.siteMap.layers),window.aggrData=siteData.aggrData,filter.init(window.siteData.uniques,window.siteMap.layers);var e=function(){window.pdfPanel.hide(),document.querySelectorAll("site-details").forEach(function(e){e.siteinfo=null})};async function t(t){return e(),document.querySelectorAll("site-details").forEach(function(e){e.siteinfo=t}),!0}window.router=new class extends window.L.Evented{constructor(){super(),this.router=new r.UIRouter,this.router.plugin(r.pushStateLocationPlugin),this.router.plugin(r.servicesPlugin),this.routes={}}start(){this.router.urlService.rules.initial({state:y}),this.router.urlService.rules.otherwise({state:y}),this.router.urlService.listen(),this.router.urlService.sync()}addRoute(e){e&&e.name&&(this.routes[e.name]=e,this.router.stateRegistry.register(e))}clearRoute(){this.setRoute()}setRoute(e,t){arguments.length>0&&this.routes[e]?this.router.stateService.go(e,t):this.router.stateService.go(y)}link(e,t){let i="";return i=t?this.router.stateService.href(e,t):this.router.stateService.href(e)}},window.router.addRoute({name:"entry",url:"/",onEnter:function(t,i){window.siteMap.clearSelection(),e(),document.querySelector("#app").setAttribute("data-view","app"),window.sidebar.switchTab("default"),window.siteMap.setVisibility(!0)},onExit:function(e,t){}}),window.router.addRoute({name:"view",url:"/view/:Site_Code",onEnter:function(e,i){let r=e.params(),s=window.siteMap.selectSite(r);s?(document.querySelectorAll("site-details").forEach(function(e){e.printLayout=!1}),t(s).then(()=>{document.querySelector("#app").setAttribute("data-view","app"),window.sidebar.switchTab("details"),window.siteMap.setVisibility(!0)})):window.router.clearRoute()},onExit:function(e,t){}}),window.router.addRoute({name:"print",url:"/print/:Site_Code",onEnter:function(e,i){let r=e.params(),s=window.siteMap.selectSite(r);s?(document.querySelectorAll("site-details").forEach(function(e){e.printLayout=!0}),t(s).then(()=>{document.querySelector("#app").removeAttribute("data-view"),window.sidebar.switchTab("details"),window.siteMap.setVisibility(!1)})):window.router.clearRoute()},onExit:function(e,t){}}),window.router.router.transitionService.onEnter({},()=>{document.querySelector("#spinner").setAttribute("data-closed",!0)}),window.router.start(),window.siteMap.on("interaction",e=>{e.Site_Code?window.router.setRoute("view",e):window.router.clearRoute()})}),document.addEventListener("clear-selection",function(e){window.router.clearRoute()}),document.addEventListener("toggle-print",function(e){e.detail.on?window.router.setRoute("print",e.detail.params):window.router.setRoute("view",e.detail.params)}),document.addEventListener("toggle-pdf-panel",function(e){window.siteMap.setVisibility(e.detail.closed)}),window.filter.addEventListener("filtered",function(e){window.siteMap.updatePoints(e.detail.activePoints)}),e.MapFilter=D,e.SiteDetails=$,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
