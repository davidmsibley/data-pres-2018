{"version":3,"file":"index.min.js","sources":["../../app/restyling-circle-marker.js","../../app/site-map.js","../../js/common.js","../../lit/filter-controls.js","../../app/site-data.js","../../app/site-router.js","../../app/index.js"],"sourcesContent":["\nconst colorRange = [\n  '#e0ecf4',\n  '#bfd3e6',\n  '#9ebcda',\n  '#8c96c6',\n  '#8c6bb1',\n  '#88419d',\n  '#810f7c'\n];\nexport const RestylingCircleMarker = L.CircleMarker.extend({\n  getEvents: function() {\n    return {\n      zoomend: this._restyle,\n      filterpoints: this._filter\n    }\n  }, \n  _restyle: function(e){\n    this.setRadius(RestylingCircleMarker.calcRadius(e.target.getZoom()))\n  },\n  _filter: function(e) {\n    let isDisplayable = e.detail.resolve(this.feature.properties);\n    if (isDisplayable) {\n      this.setStyle({\n        stroke: true,\n        fill: true\n      })\n    } else {\n      this.setStyle({\n        stroke: false,\n        fill: false\n      })\n    }\n  },\n  highlight: function() {\n    this._activeBackup = {\n      color: this.options.color,\n      stroke: this.options.stroke,\n      fill: this.options.fill\n    };\n    this.setStyle({\n      color: 'var(--palette-active)',\n      stroke: true,\n      fill: true\n    })\n  },\n  removeHighlight: function() {\n    if (this._activeBackup) {\n      this.setStyle(this._activeBackup);\n      this._activeBackup = null;\n    }\n  }\n});\n\nRestylingCircleMarker.calcRadius = (a) => Math.max(a/1.5,3);","import { RestylingCircleMarker } from './restyling-circle-marker.js';\n\nexport class SiteMap extends window.L.Evented {\n  constructor() {\n    super();\n    this.selected = false;\n    this._highlight = null;\n\n    /* ~~~~~~~~ Map ~~~~~~~~ */\n    //create a map, center it, and set the zoom level. \n    //set zoomcontrol to false because we will add it in a different corner. \n    const map = this.map = L.map('map', {zoomControl:false}).setView([45, -89.623861], 7);\n    this.el = document.querySelector('#map');\n     \n     /* ~~~~~~~~ Zoom Control ~~~~~~~~ */\n    //place a zoom control in the top right: \n    new L.Control.Zoom({position: 'topright'}).addTo(map);\n\n     \n    /* ~~~~~~~~ Basemap Layers ~~~~~~~~ */\n     \n    // basemaps from Open Street Map\n    const osmhot = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a> contributors', \n      label: \"OpenStreetMap Humanitarian\"\n    }).addTo(map);\n\n    // Esri basemaps \n    const esrisat = L.esri.basemapLayer('Imagery', {label: \"Esri Satellite\"});\n    \n    // add the basemap control to the map  \n    var basemaps = [osmhot, esrisat]; \n    map.addControl(L.control.basemaps({\n       basemaps: basemaps, \n       tileX: 0, \n       tileY: 0, \n       tileZ: 1\n    })); \n\n    /* +++++++++++ Borehole Geophysical Logs layer +++++++++++ */ \n    let bore = this.bore = L.esri.featureLayer({\n      name: 'Geophysical Log Data',\n      url: \"https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/borehole_geophysics/MapServer/0\",\n      pointToLayer: function(geoJsonPoint, latlon) {\n        return new RestylingCircleMarker(latlon, {\n          weight: 2,\n          color: 'var(--palette-blue)',\n          radius: RestylingCircleMarker.calcRadius(map.getZoom()),\n          stroke: false,\n          fill: false\n        });\n      }\n    }).on('click', (function(e) {\n      if (this._highlight !== e.propagatedFrom) {\n        this.fire('interaction', e.propagatedFrom.feature.properties);\n      } else {\n        this.fire('interaction');\n      }\n    }).bind(this));\n\n    /* +++++++++++ Sediment Core layer +++++++++++ */ \n    let quat = this.quat = L.esri.featureLayer({\n      name: 'Quaternary Core Data',\n      url: \"https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/sediment_core/MapServer/0\",\n      pointToLayer: function(geoJsonPoint, latlon) {\n        return new RestylingCircleMarker(latlon, {\n          weight: 2,\n          color: 'var(--palette-green)',\n          radius: RestylingCircleMarker.calcRadius(map.getZoom()),\n          stroke: false,\n          fill: false\n        });\n      }\n    }).on('click', (function(e) {\n      if (this._highlight !== e.propagatedFrom) {\n        this.fire('interaction', e.propagatedFrom.feature.properties);\n      } else {\n        this.fire('interaction');\n      }\n    }).bind(this));\n\n    this.layers = [bore, quat];\n\n    Promise.all([new Promise(function(resolve, reject) {\n      bore.once('load', (function() {\n        resolve();\n      }))\n    }),new Promise(function(resolve, reject) {\n      quat.once('load', (function() {\n        resolve();\n      }))\n    })]).then(() => {\n      let lookup = {};\n      this.layers.forEach(function(layer, idx, arr) {\n        layer.eachFeature(function(obj) {\n          let wid = obj.feature.properties['Wid'];\n          let siteCode = SiteMap.getSiteCode(obj.feature.properties);\n          let siteName = obj.feature.properties['Site_Name'] || obj.feature.properties['SiteName'];\n          let latLon = obj.getLatLng();\n          let cache = lookup[siteCode] || {\n            'Site_Code': siteCode,\n            'Site_Name': siteName,\n            'Wid': wid,\n            'Latitude': latLon['lat'],\n            'Longitude': latLon['lng'],\n            point: obj,\n            datas: new Array(arr.length)\n          };\n          obj.feature.properties['Site_Code'] = siteCode;\n          obj.feature.properties['Data_Type'] = layer.options.name;\n\n          cache.datas[idx] = obj.feature.properties;\n          lookup[siteCode] = cache;\n        });\n      });\n      this._lookup = lookup;\n      this.fire('init');\n    });\n\n    bore.addTo(map);\n    quat.addTo(map);\n  }\n\n  static getSiteCode(params) {\n    let keys = ['Wid', 'ID', 'Site_Code'];\n    let result = keys.reduce((prev, curr) => {\n      return prev || params[curr];\n    }, undefined)\n    return result;\n  }\n\n  //TODO HACK\n  getPoint(params) {\n    let result = null;\n    let cache = this._lookup[SiteMap.getSiteCode(params)];\n    if (cache) {\n      result = cache.point;\n    }\n    return result;\n  }\n\n  getSite(params) {\n    let result = this._lookup[SiteMap.getSiteCode(params)];\n    return result;\n  }\n\n  zoomToPoint(site) {\n    let point = this.getPoint(site);\n    if (point) {\n      this.map.setZoomAround(point.getLatLng(), 15);\n    }\n  }\n\n  getHighlightPoint() {\n    // console.log('retrieve highlight point');\n    let result = this._highlight;\n    return result;\n  }\n\n  setHighlightPoint(point) {\n    if (point) {\n      // console.log('set highlight point');\n      this._highlight = point;\n      this._highlight.bringToFront()\n      this._highlight.highlight();\n    } else {\n      this.clearSelection();\n    }\n  }\n\n  selectPoint(params) {\n    let result = null;\n    // console.log('select point on map:', site);\n    let point = this.getPoint(params);\n    if (point) {\n      result = point.feature.properties;\n      let highlightPoint = this.getHighlightPoint();\n      if (point !== highlightPoint) {\n        this.clearSelection();\n        this.setHighlightPoint(point);\n      }\n    }\n    return result;\n  }\n\n  selectSite(params) {\n    let result = this.getSite(params);\n    this.selectPoint(params);\n    return result;\n  }\n\n  clearSelection() {\n    // console.log('clear highlight group');\n    if (this._highlight) {\n      this._highlight.bringToBack();\n      this._highlight.removeHighlight();\n    }\n    this._highlight = null;\n  }\n\n  setVisibility(isVisible) {\n    if (isVisible) {\n      this.el.removeAttribute('data-closed');\n      this.map.invalidateSize();\n    } else {\n      this.el.setAttribute('data-closed', true);\n    }\n  }\n\n}","export { LitElement, html, css } from 'lit-element';\nexport { pushStateLocationPlugin, servicesPlugin, UIRouter } from '@uirouter/core';\n\n// https://gist.github.com/gordonbrander/2230317\nexport function genId() {\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\n/**\n * @param {HTMLElement} context element to dispatch event from\n * @param {String} eventName custom event name\n * @param {Object} detail \n * @param {Boolean} bubbles does the event bubble up the elements\n * @param {Boolean} composed does the event bubble up through ShadowDOM?\n */\nexport function dispatch(context, eventName, detail, bubbles, composed) {\n  context.dispatchEvent(\n    new CustomEvent(\n      eventName, \n      {\n        bubbles,\n        composed,\n        detail\n      }\n    )\n  );\n}","import { html } from 'lit-element';\nimport { genId } from '../js/common.js';\n\nexport class FilterGroup {\n  constructor(config) {\n    Object.assign(this, config);\n    if (!this.id) {\n      this.id = genId();\n    }\n  }\n  activate(context) {\n    let result = null;\n    const input = context.detail.checked;\n    if (context.toggleable && input) {\n      result = {\n        id: context.id,\n        resolve: function(feature) {\n          return feature[context.prop] === context.value;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class CheckboxControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <input type=\"checkbox\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n\n    let input = context.target.nextElementSibling.checked;\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop]\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class GTLTControl {\n  constructor(isDate) {\n    this.id = genId();\n    this.gtName = (isDate)?'after':'at least';\n    this.ltName = (isDate)?'before':'less than';\n  }\n  get next() {\n    return html`\n      <select>\n        <option value=\"gt\">${this.gtName}</option>\n        <option value=\"lt\">${this.ltName}</option>\n      </select>\n      <input type=\"text\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n    context['gt'] = (a, b) => (a >= b);\n    context['lt'] = (a, b) => (a < b);\n\n    const predicate = context[context.target.nextElementSibling.value];\n    const input = context.target.nextElementSibling.nextElementSibling.value;\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            isValid = predicate(feature[context.prop], input);\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class SelectControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <select ?disabled=\"${!this.options}\">\n        <option></option>\n        ${(!this.options)?'':this.options.map((el) => html`\n        <option value=\"${el}\">${el}</option>\n        `)}\n      </select>\n    `;\n  }\n  init(uniques) {\n    if (!this.options) {\n      this.options = Array.from(uniques).sort();\n    }\n  }\n  handle(context) {\n    let result = null;\n\n    const input = context.target.nextElementSibling.value;\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            const value = feature[context.prop]\n            isValid = value === input;\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class TextControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <input type=\"text\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n\n    const input = ('' + context.target.nextElementSibling.value).trim().toUpperCase();\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            const value = ('' + feature[context.prop]).trim().toUpperCase();\n            isValid = value === input;\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class ContainsControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <input type=\"text\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n\n    const input = ('' + context.target.nextElementSibling.value).trim().toUpperCase();\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            const value = ('' + feature[context.prop]).trim().toUpperCase();\n            isValid = value.includes(input);\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}","import {\n  FilterGroup,\n  CheckboxControl,\n  GTLTControl,\n  SelectControl,\n  TextControl,\n  ContainsControl\n} from '../lit/filter-controls.js';\n\nexport class SiteData {\n  constructor(...layer) {\n\n    // Define aggregated data for visualization\n    this._aggrKeys = [\n      'County',\n      'Drill_Meth'\n    ];\n    this.aggrData = [];\n    for (let l of layer) {\n      this.aggrData.push(SiteData._gatherAggrData(l, this._aggrKeys));\n    }\n\n    this.datas = this.aggrData.map((el)=>el.data).reduce((prev, curr)=>prev.concat(curr),[]);\n    this.uniques = {};\n    this._aggrKeys.forEach((key) => this.uniques[key] = new Set(this.datas.map((el)=>el[key]).filter((el)=>!!el)));\n  }\n\n  static _gatherAggrData(layer, aggrKeys) {\n    const aggrData = {\n      aggr: {},\n      data: []\n    };\n\n    // Collect datasets and aggregates\n    layer.eachFeature(function(obj, l) {\n      let result = {};\n      aggrKeys.forEach(function(key) {\n        result[key] = obj.feature.properties[key]\n        if (!aggrData.aggr[key]) {\n          aggrData.aggr[key] = {};\n        }\n        let group = aggrData.aggr[key];\n        if (result[key] && 'number' === typeof result[key]) {\n          if (!group.max || group.max < result[key]) {\n            group.max = result[key];\n          }\n          if (!group.min || group.min > result[key]) {\n            group.min = result[key];\n          }\n        }\n      });\n      aggrData.data.push(result);\n    });\n\n    return aggrData;\n  }\n}\n\nexport const ignoredKeys = [\n  'Site_Code',\n  'Data_Type',\n  'SiteName',\n  'Site_Name',\n  'Wid',\n  'ID'\n];\nexport const keyLookup = {\n  'SiteName': {title: 'Site Name', desc: ''},\n  'Site_Name': {title: 'Site Name', desc: ''},\n  'Wid': {title: 'WID', desc: ''},\n  'ID': {title: 'ID', desc: ''},\n  'RecentLog': {title: 'Most recent log (year)', desc: ''},\n  'MaxDepth': {title: 'Max depth (ft)', desc: ''},\n  'Norm_Res': {title: 'Normal Resistivity', desc: ''},\n  'Caliper': {title: 'Caliper', desc: ''},\n  'Gamma': {title: 'Natural Gamma', desc: ''},\n  'SP': {title: 'Spontaneous (Self) Potential', desc: ''},\n  'SPR': {title: 'Single Point Resistivity', desc: ''},\n  'Spec_Gamma': {title: 'Spectral Gamma', desc: ''},\n  'Fluid_Cond': {title: 'Fluid Conductivity', desc: ''},\n  'Flow_Spin': {title: 'Spinner Flow Meter', desc: ''},\n  'Fluid_Temp': {title: 'Fluid Temperature', desc: ''},\n  'Fluid_Res': {title: 'Fluid Resistivity', desc: ''},\n  'OBI': {title: 'Optical Borehole Image (OBI)', desc: ''},\n  'ABI': {title: 'Acoustic Borehole Image (ABI)', desc: ''},\n  'Video': {title: 'Video', desc: ''},\n  'Drill_Year': {title: 'Drill year', desc: ''},\n  'Depth_Ft': {title: 'Depth (ft)', desc: ''},\n  'Drill_Meth': {title: 'Drill Method', desc: ''},\n  'Subsamples': {title: 'Subsamples', desc: ''},\n  'Photos': {title: 'Core Photos', desc: ''},\n  'Grainsize': {title: 'Grainsize', desc: ''},\n};\n\nexport const filterLookup = [\n  new FilterGroup({\n    title: \"Site Information\",\n    open: true,\n    sections: [\n      {\n        fields: {\n          \"County\": {\n            controls: [\n              new SelectControl()\n            ]\n          },\n          // \"SiteName\": {\n          //   controls: [\n          //     new ContainsControl()\n          //   ]\n          // },\n          \"Site_Name\": {\n            controls: [\n              new ContainsControl()\n            ]\n          },\n          \"Wid\": {\n            controls: [\n              new TextControl()\n            ]\n          },\n        }\n      }\n    ]\n  }),\n  new FilterGroup({\n    title: \"Geophysical Log Data\",\n    prop: 'Data_Type',\n    'Data_Type': 'Geophysical Log Data',\n    toggleable: true,\n    active: true,\n    sections: [\n      {\n        fields: {\n          \"RecentLog\": {\n            controls: [\n              new GTLTControl(true)\n            ]\n          },\n          \"MaxDepth\": {\n            controls: [\n              new GTLTControl()\n            ]\n          }\n        }\n      },\n      {\n        title: \"Geologic\",\n        fields: {\n          \"Norm_Res\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Caliper\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Gamma\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"SP\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"SPR\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Spec_Gamma\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n\n        }\n      },\n      {\n        title: \"Hydrogeologic\",\n        fields: {\n          \"Fluid_Cond\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Flow_Spin\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Fluid_Temp\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Fluid_Res\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Flow_HP\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n\n        }\n      },\n      {\n        title: \"Image\",\n        fields: {\n          \"OBI\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"ABI\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Video\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n\n        }\n      }\n    ]\n  }),\n  new FilterGroup({\n    title: \"Quaternary Core Data\",\n    prop: 'Data_Type',\n    'Data_Type': 'Quaternary Core Data',\n    toggleable: true,\n    active: true,\n    sections: [\n      {\n        fields: {\n          \"Drill_Year\": {\n            controls: [\n              new GTLTControl(true)\n            ]\n          },\n          \"Depth_Ft\": {\n            controls: [\n              new GTLTControl()\n            ]\n          },\n          \"Drill_Meth\": {\n            controls: [\n              new SelectControl()\n            ]\n          },\n        }\n      },\n      {\n        title: \"Analyses available\",\n        fields: {\n          \"Subsamples\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Photos\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Grainsize\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          }\n        }\n      }\n    ]\n  })\n];","import { pushStateLocationPlugin, servicesPlugin, UIRouter } from '@uirouter/core';\nconst DEFAULT_ROUTE = 'entry';\n\nexport class SiteRouter extends window.L.Evented {\n\n  constructor() {\n    super();\n    this.router = new UIRouter();\n    this.router.plugin(pushStateLocationPlugin);\n    this.router.plugin(servicesPlugin);\n    this.routes = {};\n  }\n\n  start() {\n    this.router.urlService.rules.initial({ state: DEFAULT_ROUTE });\n    this.router.urlService.rules.otherwise({ state: DEFAULT_ROUTE });\n    // this.router.trace.enable(1);\n    this.router.urlService.listen();\n    this.router.urlService.sync();\n  }\n\n  addRoute(config) {\n    if (config && config.name) {\n      this.routes[config.name] = config;\n      this.router.stateRegistry.register(config);\n    }\n  }\n\n  /**\n   * clear selection\n   */\n  clearRoute() {\n    this.setRoute();\n  }\n\n  setRoute(name, params) {\n    if (arguments.length > 0 && this.routes[name]) {\n      this.router.stateService.go(name, params);\n    } else {\n      this.router.stateService.go(DEFAULT_ROUTE);\n    }\n  }\n\n  link(name, params) {\n    let result = '';\n    if (params) {\n      result = this.router.stateService.href(name, params);\n    } else {\n      result = this.router.stateService.href(name);\n    }\n    return result;\n  }\n\n}","import { SiteMap } from './site-map.js';\nimport { SiteData } from './site-data.js';\nimport { SiteRouter } from './site-router.js';\n\nwindow.siteMap = new SiteMap();\nwindow.sidebar = document.querySelector('#sidebar');\n\nwindow.siteMap.once('init', function() {\n  window.siteData = new SiteData(window.siteMap.bore, window.siteMap.quat);\n  window.aggrData = siteData.aggrData;\n  document.querySelector('#filter').init(window.siteData.uniques);\n\n\n  var deselectFeature = function() {\n    document.dispatchEvent(new CustomEvent('toggle-pdf', {bubbles: true, detail: {closed: true}}));\n    document.querySelectorAll('site-details').forEach(function(details) {\n      details['siteinfo'] = null;\n    });\n    document.querySelectorAll('pdf-view').forEach(function(sketch) {\n      sketch['pdfsrc'] = null;\n    });\n  }\n\n  async function selectFeature(info) {\n    deselectFeature();\n    document.querySelectorAll('site-details').forEach(function(details) {\n      details['siteinfo'] = info;\n    });\n    document.querySelectorAll('pdf-view').forEach(function(sketch) {\n      sketch['pdfsrc'] = (info.Wid)?'https://data.wgnhs.wisc.edu/geophysical-logs/'+info.Wid+'.pdf':null;\n    });\n    return true;\n  };\n\n  window.router = new SiteRouter();\n  window.router.addRoute({\n    name: 'entry',\n    url: '/',\n    onEnter: function(trans, state) {\n      // console.log('route-entry');\n      window.siteMap.clearSelection();\n      deselectFeature();\n      document.querySelector('#app').setAttribute('data-view', 'app');\n      window.sidebar.switchTab('default');\n      window.siteMap.setVisibility(true);\n    },\n    onExit: function(trans, state) {\n\n    },\n  });\n  window.router.addRoute({\n    name: 'view',\n    url: '/view/:Site_Code',\n    // params: {\n    //   'Site_Code': {\n    //     array: true\n    //   }\n    // },\n    onEnter: function(trans, state) {\n      // console.log('route-view');\n      let params = trans.params();\n      let attr = window.siteMap.selectSite(params);\n      if (attr) {\n        document.querySelectorAll('site-details').forEach(function(details) {\n          details['printLayout'] = false;\n        });\n        selectFeature(attr).then(() => {\n          document.querySelector('#app').setAttribute('data-view', 'app');\n          window.sidebar.switchTab('details');\n          window.siteMap.setVisibility(true);\n        })\n      } else {\n        window.router.clearRoute();\n      }\n    },\n    onExit: function(trans, state) {\n\n    },\n  });\n  window.router.addRoute({\n    name: 'print',\n    url: '/print/:Site_Code',\n    // params: {\n    //   'Site_Code': {\n    //     array: true\n    //   }\n    // },\n    onEnter: function(trans, state) {\n      // console.log('route-print');\n      let params = trans.params();\n      let attr = window.siteMap.selectSite(params);\n      if (attr) {\n        document.querySelectorAll('site-details').forEach(function(details) {\n          details['printLayout'] = true;\n        });\n        selectFeature(attr).then(() => {\n          document.querySelector('#app').removeAttribute('data-view');\n          window.sidebar.switchTab('details');\n          window.siteMap.setVisibility(false);\n        })\n      } else {\n        window.router.clearRoute();\n      }\n    },\n    onExit: function(trans, state) {\n\n    },\n  });\n  window.router.router.transitionService.onEnter({}, ()=>{\n    document.querySelector('#spinner').setAttribute('data-closed', true);\n  });\n  // Start the router\n  window.router.start();\n\n  window.siteMap.on('interaction', (params) => {\n    if (params['Site_Code']) {\n      window.router.setRoute('view', params);\n    } else {\n      window.router.clearRoute();\n    }\n  });\n});\n\ndocument.addEventListener('clear-selection', function(e) {\n  window.router.clearRoute();\n});\n\ndocument.addEventListener('toggle-print', function(e) {\n  if (e.detail.on) {\n    window.router.setRoute('print', e.detail.params);\n  } else {\n    window.router.setRoute('view', e.detail.params);\n  }\n});\n\ndocument.addEventListener('toggle-pdf', function(e) {\n  window.siteMap.setVisibility(e.detail.closed);\n});\n"],"names":["RestylingCircleMarker","L","CircleMarker","extend","getEvents","zoomend","this","_restyle","filterpoints","_filter","e","setRadius","calcRadius","target","getZoom","detail","resolve","feature","properties","setStyle","stroke","fill","highlight","_activeBackup","color","options","removeHighlight","a","Math","max","SiteMap","window","Evented","[object Object]","super","selected","_highlight","map","zoomControl","setView","el","document","querySelector","Control","Zoom","position","addTo","basemaps","tileLayer","attribution","label","esri","basemapLayer","addControl","control","tileX","tileY","tileZ","bore","featureLayer","name","url","pointToLayer","geoJsonPoint","latlon","weight","radius","on","propagatedFrom","fire","bind","quat","layers","Promise","all","reject","once","then","lookup","forEach","layer","idx","arr","eachFeature","obj","wid","siteCode","getSiteCode","siteName","latLon","getLatLng","cache","Site_Code","Site_Name","Wid","Latitude","Longitude","point","datas","Array","length","_lookup","params","reduce","prev","curr","undefined","result","site","getPoint","setZoomAround","bringToFront","clearSelection","getHighlightPoint","setHighlightPoint","getSite","selectPoint","bringToBack","isVisible","removeAttribute","invalidateSize","setAttribute","genId","random","toString","substr","FilterGroup","config","Object","assign","id","context","input","checked","toggleable","prop","value","CheckboxControl","next","html","nextElementSibling","resolveGroup","group","GTLTControl","isDate","gtName","ltName","b","predicate","isValid","SelectControl","uniques","from","sort","SiteData","_aggrKeys","aggrData","l","push","_gatherAggrData","data","concat","key","Set","filter","aggrKeys","aggr","min","title","open","sections","fields","County","controls","trim","toUpperCase","includes","Data_Type","active","RecentLog","MaxDepth","Norm_Res","Caliper","Gamma","SP","SPR","Spec_Gamma","Fluid_Cond","Flow_Spin","Fluid_Temp","Fluid_Res","Flow_HP","OBI","ABI","Video","Drill_Year","Depth_Ft","Drill_Meth","Subsamples","Photos","Grainsize","DEFAULT_ROUTE","siteMap","sidebar","siteData","init","deselectFeature","dispatchEvent","CustomEvent","bubbles","closed","querySelectorAll","details","sketch","async","selectFeature","info","router","UIRouter","plugin","pushStateLocationPlugin","servicesPlugin","routes","urlService","rules","initial","state","otherwise","listen","sync","stateRegistry","register","setRoute","arguments","stateService","go","href","addRoute","onEnter","trans","switchTab","setVisibility","onExit","attr","selectSite","clearRoute","transitionService","start","addEventListener"],"mappings":"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"}