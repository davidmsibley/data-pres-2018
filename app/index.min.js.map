{"version":3,"file":"index.min.js","sources":["../../app/restyling-circle-marker.js","../../app/site-map.js","../../app/site-data.js","../../app/site-router.js","../../app/index.js"],"sourcesContent":["\nconst colorRange = [\n  '#e0ecf4',\n  '#bfd3e6',\n  '#9ebcda',\n  '#8c96c6',\n  '#8c6bb1',\n  '#88419d',\n  '#810f7c'\n];\nexport const RestylingCircleMarker = L.CircleMarker.extend({\n  getEvents: function() {\n    return {\n      zoomend: this._restyle,\n      filterpoints: this._filter\n    }\n  }, \n  _restyle: function(e){\n    this.setRadius(RestylingCircleMarker.calcRadius(e.target.getZoom()))\n  },\n  _filter: function(e) {\n    let isDisplayable = e.detail.resolve(this.feature.properties);\n    if (isDisplayable) {\n      this.setStyle({\n        stroke: true,\n        fill: true\n      })\n    } else {\n      this.setStyle({\n        stroke: false,\n        fill: false\n      })\n    }\n  },\n  highlight: function() {\n    this._activeBackup = this.options.color;\n    this.setStyle({'color': 'orange'})\n  },\n  removeHighlight: function() {\n    if (this._activeBackup) {\n      this.setStyle({'color': this._activeBackup})\n      this._activeBackup = null;\n    }\n  }\n});\n\nRestylingCircleMarker.calcRadius = (a) => Math.max(a/1.5,3);","import { RestylingCircleMarker } from './restyling-circle-marker.js';\n\nexport class SiteMap extends window.L.Evented {\n  constructor() {\n    super();\n    this.selected = false;\n    this._highlight = null;\n\n    /* ~~~~~~~~ Map ~~~~~~~~ */\n    //create a map, center it, and set the zoom level. \n    //set zoomcontrol to false because we will add it in a different corner. \n    const map = this.map = L.map('map', {zoomControl:false}).setView([45, -89.623861], 7);\n    this.el = document.querySelector('#map');\n     \n     /* ~~~~~~~~ Zoom Control ~~~~~~~~ */\n    //place a zoom control in the top right: \n    new L.Control.Zoom({position: 'topright'}).addTo(map);\n\n     \n    /* ~~~~~~~~ Basemap Layers ~~~~~~~~ */\n     \n    // basemaps from Open Street Map\n    const osmhot = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a> contributors', \n      label: \"OpenStreetMap Humanitarian\"\n    }).addTo(map);\n\n    // Esri basemaps \n    const esrisat = L.esri.basemapLayer('Imagery', {label: \"Esri Satellite\"});\n    \n    // add the basemap control to the map  \n    var basemaps = [osmhot, esrisat]; \n    map.addControl(L.control.basemaps({\n       basemaps: basemaps, \n       tileX: 0, \n       tileY: 0, \n       tileZ: 1\n    })); \n\n    /* +++++++++++ Borehole Geophysical Logs layer +++++++++++ */ \n    let bore = this.bore = L.esri.featureLayer({\n      url: \"https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/borehole_geophysics/MapServer/0\",\n      pointToLayer: function(geoJsonPoint, latlon) {\n        return new RestylingCircleMarker(latlon, {\n          weight: 2,\n          radius: RestylingCircleMarker.calcRadius(map.getZoom())\n        });\n      }\n    }).on('click', (function(e) {\n      if (this._highlight !== e.propagatedFrom) {\n        this.fire('interaction', e.propagatedFrom.feature.properties);\n      } else {\n        this.fire('interaction');\n      }\n    }).bind(this));\n\n    /* +++++++++++ Sediment Core layer +++++++++++ */ \n    let quat = this.quat = L.esri.featureLayer({\n      url: \"https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/sediment_core/MapServer/0\",\n      pointToLayer: function(geoJsonPoint, latlon) {\n        return new RestylingCircleMarker(latlon, {\n          weight: 2,\n          color: '#33AA44',\n          radius: RestylingCircleMarker.calcRadius(map.getZoom())\n        });\n      }\n    }).on('click', (function(e) {\n      if (this._highlight !== e.propagatedFrom) {\n        this.fire('interaction', e.propagatedFrom.feature.properties);\n      } else {\n        this.fire('interaction');\n      }\n    }).bind(this));\n\n    this.layers = [bore, quat];\n\n    Promise.all([new Promise(function(resolve, reject) {\n      bore.once('load', (function() {\n        resolve();\n      }))\n    }),new Promise(function(resolve, reject) {\n      quat.once('load', (function() {\n        resolve();\n      }))\n    })]).then(function() {\n      let lookup = {};\n      this.layers.forEach(function(layer) {\n        layer.eachFeature(function(obj) {\n          lookup[SiteMap.getSiteCode(obj.feature.properties)] = obj;\n        });\n      });\n      this._lookup = lookup;\n      this.fire('init');\n    }.bind(this));\n\n    bore.addTo(map);\n    quat.addTo(map);\n  }\n\n  static getSiteCode(params) {\n    let keys = ['Wid', 'ID', 'Site_Code'];\n    let result = keys.reduce((prev, curr) => {\n      return prev || params[curr];\n    }, undefined)\n    return result;\n  }\n\n  getPoint(params) {\n    let result = this._lookup[SiteMap.getSiteCode(params)];\n    return result;\n  }\n\n  zoomToPoint(site) {\n    let point = this.getPoint(site);\n    if (point) {\n      this.map.setZoomAround(point.getLatLng(), 15);\n    }\n  }\n\n  getHighlightPoint() {\n    // console.log('retrieve highlight point');\n    let result = this._highlight;\n    return result;\n  }\n\n  setHighlightPoint(point) {\n    if (point) {\n      // console.log('set highlight point');\n      this._highlight = point;\n      this._highlight.bringToFront()\n      this._highlight.highlight();\n    } else {\n      this.clearSelection();\n    }\n  }\n\n  selectPoint(params) {\n    let result = null;\n    // console.log('select point on map:', site);\n    let point = this.getPoint(params);\n    if (point) {\n      result = point.feature.properties;\n      let highlightPoint = this.getHighlightPoint();\n      if (point !== highlightPoint) {\n        this.clearSelection();\n        this.setHighlightPoint(point);\n      }\n    }\n    return result;\n  }\n\n  clearSelection() {\n    // console.log('clear highlight group');\n    if (this._highlight) {\n      this._highlight.bringToBack();\n      this._highlight.removeHighlight();\n    }\n    this._highlight = null;\n  }\n\n  setVisibility(isVisible) {\n    if (isVisible) {\n      this.el.removeAttribute('data-closed');\n      this.map.invalidateSize();\n    } else {\n      this.el.setAttribute('data-closed', true);\n    }\n  }\n\n\n}","\nexport class SiteData {\n  constructor(...layer) {\n\n    // Define aggregated data for visualization\n    this._aggrKeys = [];\n    this.aggrData = [];\n    for (let l of layer) {\n      this.aggrData.push(SiteData._gatherAggrData(l, this._aggrKeys));\n    }\n  }\n\n  static _gatherAggrData(layer, aggrKeys) {\n    const aggrData = {\n      aggr: {},\n      data: []\n    };\n\n    // Collect datasets and aggregates\n    layer.eachFeature(function(obj, l) {\n      let result = {};\n      aggrKeys.forEach(function(key) {\n        result[key] = obj.feature.properties[key]\n        if (!aggrData.aggr[key]) {\n          aggrData.aggr[key] = {};\n        }\n        if (result[key] && 'number' === typeof result[key]) {\n          if (!aggrData.aggr[key].max || aggrData.aggr[key].max < result[key]) {\n            aggrData.aggr[key].max = result[key];\n          }\n          if (!aggrData.aggr[key].min || aggrData.aggr[key].min > result[key]) {\n            aggrData.aggr[key].min = result[key];\n          }\n        }\n      });\n      aggrData.data.push(result);\n    });\n\n    return aggrData;\n  }\n}","\nexport class SiteRouter extends window.L.Evented {\n\n  constructor() {\n    super();\n    let router = this.router = new Navigo(window.location.origin + '/data-pres-2018/');\n    Object.entries(this.route).forEach(function(el) {\n      if (el[1].signature) {\n        router.on(el[1].signature, el[1].handler);\n      } else {\n        router.notFound(el[1].handler);\n      }\n    });\n  }\n\n  resolve() {\n    this.router.resolve();\n  }\n\n  get route() {\n    return {\n      'entry': {\n        handler: this._entryRoute.bind(this)\n      },\n      'view': {\n        signature: '/view/:Site_Code',\n        handler: this._viewSite.bind(this)\n      },\n      'print': {\n        signature: '/print/:Site_Code',\n        handler: this._printSite.bind(this)\n      }\n    };\n  }\n\n  static getSiteCode(params) {\n    let keys = ['Wid', 'ID', 'Site_Code'];\n    let result = keys.reduce((prev, curr) => {\n      return prev || params[curr];\n    }, undefined)\n    return result;\n  }\n\n  _updateLocation(path) {\n    this.router.pause();\n    this.router.navigate(path);\n    this.router.resume();\n  }\n\n  /**\n   * Non-selected Site\n   */\n  _entryRoute() {\n    this._updateLocation('/');\n    this.fire('route-entry');\n  }\n\n  /**\n   * Selected Site, View Layout\n   */\n  _viewSite(params) {\n    let code = SiteRouter.getSiteCode(params);\n    if (code) {\n      this._updateLocation('/view/' + code);\n      this.fire('route-view', params);\n    } else {\n      console.error('bad viewSite call');\n    }\n  }\n\n  /**\n   * Selected Site, Print Layout\n   */\n  _printSite(params) {\n    let code = SiteRouter.getSiteCode(params);\n    if (code) {\n      this._updateLocation('/print/' + code);\n      this.fire('route-print', params);\n    } else {\n      console.error('bad printSite call');\n    }\n  }\n\n  /**\n   * clear selection\n   */\n  clearRoute() {\n    this.setRoute();\n  }\n\n  setRoute(name, params) {\n    if (arguments.length > 0 && this.route[name]) {\n      this.route[name].handler(params);\n    } else {\n      this._entryRoute();\n    }\n  }\n\n}","import { SiteMap } from './site-map.js';\nimport { SiteData } from './site-data.js';\nimport { SiteRouter } from './site-router.js';\n\nwindow.siteMap = new SiteMap();\nwindow.sidebar = document.querySelector('#sidebar');\n\nwindow.siteMap.once('init', function() {\n  window.siteData = new SiteData(window.siteMap.bore, window.siteMap.quat);\n  window.aggrData = siteData.aggrData;\n\n  var deselectFeature = function() {\n    document.dispatchEvent(new CustomEvent('toggle-pdf', {bubbles: true, detail: {closed: true}}));\n    document.querySelectorAll('site-details').forEach(function(details) {\n      details['siteinfo'] = null;\n    });\n    document.querySelectorAll('pdf-view').forEach(function(sketch) {\n      sketch['pdfsrc'] = null;\n    });\n  }\n\n  async function selectFeature(info) {\n    deselectFeature();\n    document.querySelectorAll('site-details').forEach(function(details) {\n      details['siteinfo'] = info;\n    });\n    document.querySelectorAll('pdf-view').forEach(function(sketch) {\n      sketch['pdfsrc'] = (info.Wid)?'https://data.wgnhs.wisc.edu/geophysical-logs/'+info.Wid+'.pdf':null;\n    });\n    return true;\n  };\n\n  window.router = new SiteRouter();\n  window.router.on('route-entry', () => {\n    // console.log('route-entry');\n    window.siteMap.clearSelection();\n    deselectFeature();\n    document.querySelector('#app').setAttribute('data-view', 'app');\n    window.sidebar.switchTab('default');\n    window.siteMap.setVisibility(true);\n  });\n  window.router.on('route-view', (params) => {\n    // console.log('route-view');\n    let attr = window.siteMap.selectPoint(params);\n    if (attr) {\n      document.querySelectorAll('site-details').forEach(function(details) {\n        details['printLayout'] = false;\n      });\n      selectFeature(attr).then(() => {\n        document.querySelector('#app').setAttribute('data-view', 'app');\n        window.sidebar.switchTab('details');\n        window.siteMap.setVisibility(true);\n      })\n    } else {\n      window.router.clearRoute();\n    }\n  });\n  window.router.on('route-print', (params) => {\n    // console.log('route-print');\n    let attr = window.siteMap.selectPoint(params);\n    if (attr) {\n      document.querySelectorAll('site-details').forEach(function(details) {\n        details['printLayout'] = true;\n      });\n      selectFeature(attr).then(() => {\n        document.querySelector('#app').removeAttribute('data-view');\n        window.sidebar.switchTab('details');\n        window.siteMap.setVisibility(false);\n      })\n    } else {\n      window.router.clearRoute();\n    }\n  });\n  window.router.resolve();\n\n  window.siteMap.on('interaction', (params) => {\n    if (SiteRouter.getSiteCode(params)) {\n      window.router.setRoute('view', params);\n    } else {\n      window.router.clearRoute();\n    }\n  });\n});\n\ndocument.addEventListener('clear-selection', function(e) {\n  window.router.clearRoute();\n});\n\ndocument.addEventListener('toggle-print', function(e) {\n  if (e.detail.on) {\n    window.router.setRoute('print', e.detail.params);\n  } else {\n    window.router.setRoute('view', e.detail.params);\n  }\n});\n\ndocument.addEventListener('toggle-pdf', function(e) {\n  window.siteMap.setVisibility(e.detail.closed);\n});\n"],"names":["RestylingCircleMarker","L","CircleMarker","extend","getEvents","zoomend","this","_restyle","filterpoints","_filter","e","setRadius","calcRadius","target","getZoom","detail","resolve","feature","properties","setStyle","stroke","fill","highlight","_activeBackup","options","color","removeHighlight","a","Math","max","SiteMap","window","Evented","[object Object]","super","selected","_highlight","map","zoomControl","setView","el","document","querySelector","Control","Zoom","position","addTo","basemaps","tileLayer","attribution","label","esri","basemapLayer","addControl","control","tileX","tileY","tileZ","bore","featureLayer","url","pointToLayer","geoJsonPoint","latlon","weight","radius","on","propagatedFrom","fire","bind","quat","layers","Promise","all","reject","once","then","lookup","forEach","layer","eachFeature","obj","getSiteCode","_lookup","params","reduce","prev","curr","undefined","site","point","getPoint","setZoomAround","getLatLng","bringToFront","clearSelection","result","getHighlightPoint","setHighlightPoint","bringToBack","isVisible","removeAttribute","invalidateSize","setAttribute","SiteData","_aggrKeys","aggrData","l","push","_gatherAggrData","aggrKeys","aggr","data","key","min","SiteRouter","router","Navigo","location","origin","Object","entries","route","signature","handler","notFound","entry","_entryRoute","view","_viewSite","print","_printSite","path","pause","navigate","resume","_updateLocation","code","console","error","setRoute","name","arguments","length","siteMap","sidebar","siteData","deselectFeature","dispatchEvent","CustomEvent","bubbles","closed","querySelectorAll","details","sketch","async","selectFeature","info","Wid","switchTab","setVisibility","attr","selectPoint","clearRoute","addEventListener"],"mappings":"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"}