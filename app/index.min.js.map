{"version":3,"file":"index.min.js","sources":["../../app/restyling-circle-marker.js","../../app/site-map.js","../../app/site-data.js","../../app/site-router.js","../../app/index.js"],"sourcesContent":["\nconst colorRange = [\n  '#e0ecf4',\n  '#bfd3e6',\n  '#9ebcda',\n  '#8c96c6',\n  '#8c6bb1',\n  '#88419d',\n  '#810f7c'\n];\nexport const RestylingCircleMarker = L.CircleMarker.extend({\n  getEvents: function() {\n    return {\n      zoomend: this._restyle,\n      filterpoints: this._filter\n    }\n  }, \n  _restyle: function(e){\n    this.setRadius(RestylingCircleMarker.calcRadius(e.target.getZoom()))\n  },\n  _filter: function(e) {\n    let isDisplayable = e.detail.resolve(this.feature.properties);\n    if (isDisplayable) {\n      this.setStyle({\n        stroke: true,\n        fill: true\n      })\n    } else {\n      this.setStyle({\n        stroke: false,\n        fill: false\n      })\n    }\n  },\n  highlight: function() {\n    this._activeBackup = this.options.color;\n    this.setStyle({'color': 'orange'})\n  },\n  removeHighlight: function() {\n    if (this._activeBackup) {\n      this.setStyle({'color': this._activeBackup})\n      this._activeBackup = null;\n    }\n  }\n});\n\nRestylingCircleMarker.calcRadius = (a) => Math.max(a/1.5,3);","import { RestylingCircleMarker } from './restyling-circle-marker.js';\n\nexport class SiteMap extends window.L.Evented {\n  constructor() {\n    super();\n    this.selected = false;\n    this._highlight = null;\n\n    /* ~~~~~~~~ Map ~~~~~~~~ */\n    //create a map, center it, and set the zoom level. \n    //set zoomcontrol to false because we will add it in a different corner. \n    const map = this.map = L.map('map', {zoomControl:false}).setView([45, -89.623861], 7);\n    this.el = document.querySelector('#map');\n     \n     /* ~~~~~~~~ Zoom Control ~~~~~~~~ */\n    //place a zoom control in the top right: \n    new L.Control.Zoom({position: 'topright'}).addTo(map);\n\n     \n    /* ~~~~~~~~ Basemap Layers ~~~~~~~~ */\n     \n    // basemaps from Open Street Map\n    const osmhot = L.tileLayer('https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://osm.org/copyright\">OpenStreetMap</a> contributors', \n      label: \"OpenStreetMap Humanitarian\"\n    }).addTo(map);\n\n    // Esri basemaps \n    const esrisat = L.esri.basemapLayer('Imagery', {label: \"Esri Satellite\"});\n    \n    // add the basemap control to the map  \n    var basemaps = [osmhot, esrisat]; \n    map.addControl(L.control.basemaps({\n       basemaps: basemaps, \n       tileX: 0, \n       tileY: 0, \n       tileZ: 1\n    })); \n\n    /* +++++++++++ Borehole Geophysical Logs layer +++++++++++ */ \n    let bore = this.bore = L.esri.featureLayer({\n      url: \"https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/borehole_geophysics/MapServer/0\",\n      pointToLayer: function(geoJsonPoint, latlon) {\n        return new RestylingCircleMarker(latlon, {\n          weight: 2,\n          radius: RestylingCircleMarker.calcRadius(map.getZoom())\n        });\n      }\n    }).on('click', (function(e) {\n      if (this._highlight !== e.propagatedFrom) {\n        this.fire('interaction', e.propagatedFrom.feature.properties);\n      } else {\n        this.fire('interaction');\n      }\n    }).bind(this));\n\n    /* +++++++++++ Sediment Core layer +++++++++++ */ \n    let quat = this.quat = L.esri.featureLayer({\n      url: \"https://data.wgnhs.wisc.edu/arcgis/rest/services/geologic_data/sediment_core/MapServer/0\",\n      pointToLayer: function(geoJsonPoint, latlon) {\n        return new RestylingCircleMarker(latlon, {\n          weight: 2,\n          color: '#33AA44',\n          radius: RestylingCircleMarker.calcRadius(map.getZoom())\n        });\n      }\n    }).on('click', (function(e) {\n      if (this._highlight !== e.propagatedFrom) {\n        this.fire('interaction', e.propagatedFrom.feature.properties);\n      } else {\n        this.fire('interaction');\n      }\n    }).bind(this));\n\n    this.layers = [bore, quat];\n\n    Promise.all([new Promise(function(resolve, reject) {\n      bore.once('load', (function() {\n        resolve();\n      }))\n    }),new Promise(function(resolve, reject) {\n      quat.once('load', (function() {\n        resolve();\n      }))\n    })]).then(function() {\n      let lookup = {};\n      this.layers.forEach(function(layer) {\n        layer.eachFeature(function(obj) {\n          let siteCode = SiteMap.getSiteCode(obj.feature.properties);\n          obj.feature.properties['Site_Code'] = siteCode;\n          obj.feature.properties.Latitude = obj.getLatLng()['lat'];\n          obj.feature.properties.Longitude = obj.getLatLng()['lng'];\n          lookup[siteCode] = obj;\n        });\n      });\n      this._lookup = lookup;\n      this.fire('init');\n    }.bind(this));\n\n    bore.addTo(map);\n    quat.addTo(map);\n  }\n\n  static getSiteCode(params) {\n    let keys = ['Wid', 'ID', 'Site_Code'];\n    let result = keys.reduce((prev, curr) => {\n      return prev || params[curr];\n    }, undefined)\n    return result;\n  }\n\n  getPoint(params) {\n    let result = this._lookup[SiteMap.getSiteCode(params)];\n    return result;\n  }\n\n  zoomToPoint(site) {\n    let point = this.getPoint(site);\n    if (point) {\n      this.map.setZoomAround(point.getLatLng(), 15);\n    }\n  }\n\n  getHighlightPoint() {\n    // console.log('retrieve highlight point');\n    let result = this._highlight;\n    return result;\n  }\n\n  setHighlightPoint(point) {\n    if (point) {\n      // console.log('set highlight point');\n      this._highlight = point;\n      this._highlight.bringToFront()\n      this._highlight.highlight();\n    } else {\n      this.clearSelection();\n    }\n  }\n\n  selectPoint(params) {\n    let result = null;\n    // console.log('select point on map:', site);\n    let point = this.getPoint(params);\n    if (point) {\n      result = point.feature.properties;\n      let highlightPoint = this.getHighlightPoint();\n      if (point !== highlightPoint) {\n        this.clearSelection();\n        this.setHighlightPoint(point);\n      }\n    }\n    return result;\n  }\n\n  clearSelection() {\n    // console.log('clear highlight group');\n    if (this._highlight) {\n      this._highlight.bringToBack();\n      this._highlight.removeHighlight();\n    }\n    this._highlight = null;\n  }\n\n  setVisibility(isVisible) {\n    if (isVisible) {\n      this.el.removeAttribute('data-closed');\n      this.map.invalidateSize();\n    } else {\n      this.el.setAttribute('data-closed', true);\n    }\n  }\n\n\n}","\nexport class SiteData {\n  constructor(...layer) {\n\n    // Define aggregated data for visualization\n    this._aggrKeys = [];\n    this.aggrData = [];\n    for (let l of layer) {\n      this.aggrData.push(SiteData._gatherAggrData(l, this._aggrKeys));\n    }\n  }\n\n  static _gatherAggrData(layer, aggrKeys) {\n    const aggrData = {\n      aggr: {},\n      data: []\n    };\n\n    // Collect datasets and aggregates\n    layer.eachFeature(function(obj, l) {\n      let result = {};\n      aggrKeys.forEach(function(key) {\n        result[key] = obj.feature.properties[key]\n        if (!aggrData.aggr[key]) {\n          aggrData.aggr[key] = {};\n        }\n        if (result[key] && 'number' === typeof result[key]) {\n          if (!aggrData.aggr[key].max || aggrData.aggr[key].max < result[key]) {\n            aggrData.aggr[key].max = result[key];\n          }\n          if (!aggrData.aggr[key].min || aggrData.aggr[key].min > result[key]) {\n            aggrData.aggr[key].min = result[key];\n          }\n        }\n      });\n      aggrData.data.push(result);\n    });\n\n    return aggrData;\n  }\n}","import { pushStateLocationPlugin, servicesPlugin, UIRouter } from '@uirouter/core';\nconst DEFAULT_ROUTE = 'entry';\n\nexport class SiteRouter extends window.L.Evented {\n\n  constructor() {\n    super();\n    this.router = new UIRouter();\n    this.router.plugin(pushStateLocationPlugin);\n    this.router.plugin(servicesPlugin);\n    this.routes = {};\n  }\n\n  start() {\n    this.router.urlService.rules.initial({ state: DEFAULT_ROUTE });\n    this.router.urlService.rules.otherwise({ state: DEFAULT_ROUTE });\n    // this.router.trace.enable(1);\n    this.router.urlService.listen();\n    this.router.urlService.sync();\n  }\n\n  addRoute(config) {\n    if (config && config.name) {\n      this.routes[config.name] = config;\n      this.router.stateRegistry.register(config);\n    }\n  }\n\n  /**\n   * clear selection\n   */\n  clearRoute() {\n    this.setRoute();\n  }\n\n  setRoute(name, params) {\n    if (arguments.length > 0 && this.routes[name]) {\n      this.router.stateService.go(name, params);\n    } else {\n      this.router.stateService.go(DEFAULT_ROUTE);\n    }\n  }\n\n  link(name, params) {\n    let result = '';\n    if (params) {\n      result = this.router.stateService.href(name, params);\n    } else {\n      result = this.router.stateService.href(name);\n    }\n    return result;\n  }\n\n}","import { SiteMap } from './site-map.js';\nimport { SiteData } from './site-data.js';\nimport { SiteRouter } from './site-router.js';\n\nwindow.siteMap = new SiteMap();\nwindow.sidebar = document.querySelector('#sidebar');\n\nwindow.siteMap.once('init', function() {\n  window.siteData = new SiteData(window.siteMap.bore, window.siteMap.quat);\n  window.aggrData = siteData.aggrData;\n\n  var deselectFeature = function() {\n    document.dispatchEvent(new CustomEvent('toggle-pdf', {bubbles: true, detail: {closed: true}}));\n    document.querySelectorAll('site-details').forEach(function(details) {\n      details['siteinfo'] = null;\n    });\n    document.querySelectorAll('pdf-view').forEach(function(sketch) {\n      sketch['pdfsrc'] = null;\n    });\n  }\n\n  async function selectFeature(info) {\n    deselectFeature();\n    document.querySelectorAll('site-details').forEach(function(details) {\n      details['siteinfo'] = info;\n    });\n    document.querySelectorAll('pdf-view').forEach(function(sketch) {\n      sketch['pdfsrc'] = (info.Wid)?'https://data.wgnhs.wisc.edu/geophysical-logs/'+info.Wid+'.pdf':null;\n    });\n    return true;\n  };\n\n  window.router = new SiteRouter();\n  window.router.addRoute({\n    name: 'entry',\n    url: '/',\n    onEnter: function(trans, state) {\n      // console.log('route-entry');\n      window.siteMap.clearSelection();\n      deselectFeature();\n      document.querySelector('#app').setAttribute('data-view', 'app');\n      window.sidebar.switchTab('default');\n      window.siteMap.setVisibility(true);\n    },\n    onExit: function(trans, state) {\n\n    },\n  });\n  window.router.addRoute({\n    name: 'view',\n    url: '/view/:Site_Code',\n    // params: {\n    //   'Site_Code': {\n    //     array: true\n    //   }\n    // },\n    onEnter: function(trans, state) {\n      // console.log('route-view');\n      let params = trans.params();\n      let attr = window.siteMap.selectPoint(params);\n      if (attr) {\n        document.querySelectorAll('site-details').forEach(function(details) {\n          details['printLayout'] = false;\n        });\n        selectFeature(attr).then(() => {\n          document.querySelector('#app').setAttribute('data-view', 'app');\n          window.sidebar.switchTab('details');\n          window.siteMap.setVisibility(true);\n        })\n      } else {\n        window.router.clearRoute();\n      }\n    },\n    onExit: function(trans, state) {\n\n    },\n  });\n  window.router.addRoute({\n    name: 'print',\n    url: '/print/:Site_Code',\n    // params: {\n    //   'Site_Code': {\n    //     array: true\n    //   }\n    // },\n    onEnter: function(trans, state) {\n      // console.log('route-print');\n      let params = trans.params();\n      let attr = window.siteMap.selectPoint(params);\n      if (attr) {\n        document.querySelectorAll('site-details').forEach(function(details) {\n          details['printLayout'] = true;\n        });\n        selectFeature(attr).then(() => {\n          document.querySelector('#app').removeAttribute('data-view');\n          window.sidebar.switchTab('details');\n          window.siteMap.setVisibility(false);\n        })\n      } else {\n        window.router.clearRoute();\n      }\n    },\n    onExit: function(trans, state) {\n\n    },\n  });\n  // Start the router\n  window.router.start();\n\n  window.siteMap.on('interaction', (params) => {\n    if (params['Site_Code']) {\n      window.router.setRoute('view', params);\n    } else {\n      window.router.clearRoute();\n    }\n  });\n});\n\ndocument.addEventListener('clear-selection', function(e) {\n  window.router.clearRoute();\n});\n\ndocument.addEventListener('toggle-print', function(e) {\n  if (e.detail.on) {\n    window.router.setRoute('print', e.detail.params);\n  } else {\n    window.router.setRoute('view', e.detail.params);\n  }\n});\n\ndocument.addEventListener('toggle-pdf', function(e) {\n  window.siteMap.setVisibility(e.detail.closed);\n});\n"],"names":["RestylingCircleMarker","L","CircleMarker","extend","getEvents","zoomend","this","_restyle","filterpoints","_filter","e","setRadius","calcRadius","target","getZoom","detail","resolve","feature","properties","setStyle","stroke","fill","highlight","_activeBackup","options","color","removeHighlight","a","Math","max","SiteMap","window","Evented","[object Object]","super","selected","_highlight","map","zoomControl","setView","el","document","querySelector","Control","Zoom","position","addTo","basemaps","tileLayer","attribution","label","esri","basemapLayer","addControl","control","tileX","tileY","tileZ","bore","featureLayer","url","pointToLayer","geoJsonPoint","latlon","weight","radius","on","propagatedFrom","fire","bind","quat","layers","Promise","all","reject","once","then","lookup","forEach","layer","eachFeature","obj","siteCode","getSiteCode","Latitude","getLatLng","Longitude","_lookup","params","reduce","prev","curr","undefined","site","point","getPoint","setZoomAround","bringToFront","clearSelection","result","getHighlightPoint","setHighlightPoint","bringToBack","isVisible","removeAttribute","invalidateSize","setAttribute","SiteData","_aggrKeys","aggrData","l","push","_gatherAggrData","aggrKeys","aggr","data","key","min","DEFAULT_ROUTE","siteMap","sidebar","siteData","deselectFeature","dispatchEvent","CustomEvent","bubbles","closed","querySelectorAll","details","sketch","async","selectFeature","info","Wid","router","UIRouter","plugin","pushStateLocationPlugin","servicesPlugin","routes","urlService","rules","initial","state","otherwise","listen","sync","config","name","stateRegistry","register","setRoute","arguments","length","stateService","go","href","addRoute","onEnter","trans","switchTab","setVisibility","onExit","attr","selectPoint","clearRoute","start","addEventListener"],"mappings":"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"}