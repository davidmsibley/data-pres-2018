{"version":3,"file":"index.min.js","sources":["../../lit/app-sidebar.js","../../js/common.js","../../lit/filter-controls.js","../../app/site-data.js","../../lit/pdf-view.js","../../lit/site-details.js","../../lit/app-collapsible.js","../../lit/in-radio.js","../../lit/toggle-switch.js","../../lit/map-filter.js"],"sourcesContent":["import { LitElement, html, css } from 'lit-element';\n\nexport class AppSidebar extends LitElement {\n  static get properties() {\n    return {\n      title: {\n        type: String\n      },\n      tabs: {\n        type: Array\n      }\n    };\n  }\n\n  constructor() {\n    super();\n  }\n\n  static get styles() {\n    return css`\n      :host {\n        padding: 0 var(--border-radius);\n      }\n    `;\n  }\n\n  switchTab(choice) {\n    this.shadowRoot.querySelectorAll('slot').forEach((el) => {\n      if ((choice === 'default' && !el.getAttribute('name')) || (el.getAttribute('name') === choice)) {\n        el.hidden = false;\n      } else {\n        el.hidden = true;\n      }\n    });\n  }\n\n  handleChoiceChange(e) {\n    this.switchTab(e.detail.choice);\n  }\n\n  render() {\n    return html`\n      <style>\n        @import url(\"./css/typography.css\");\n      </style>\n\n      ${(!this.title)?'':html`<h1 class=\"header\">${this.title}</h1>`}\n      <slot></slot>\n      ${!(this.tabs)?'':this.tabs.map((el) => html`\n      <slot name='${el}' hidden></slot>\n      `)}\n    `;\n  }\n}\n\ncustomElements.define('app-sidebar', AppSidebar);","export { LitElement, html, css } from 'lit-element';\nexport { pushStateLocationPlugin, servicesPlugin, UIRouter } from '@uirouter/core';\n\n// https://gist.github.com/gordonbrander/2230317\nexport function genId() {\n  return '_' + Math.random().toString(36).substr(2, 9);\n}\n\n/**\n * @param {HTMLElement} context element to dispatch event from\n * @param {String} eventName custom event name\n * @param {Object} detail \n * @param {Boolean} bubbles does the event bubble up the elements\n * @param {Boolean} composed does the event bubble up through ShadowDOM?\n */\nexport function dispatch(context, eventName, detail, bubbles, composed) {\n  context.dispatchEvent(\n    new CustomEvent(\n      eventName, \n      {\n        bubbles,\n        composed,\n        detail\n      }\n    )\n  );\n}","import { html } from 'lit-element';\nimport { genId } from '../js/common.js';\n\nexport class FilterGroup {\n  constructor(config) {\n    Object.assign(this, config);\n    if (!this.id) {\n      this.id = genId();\n    }\n  }\n  activate(context) {\n    let result = null;\n    const input = context.detail.checked;\n    if (context.toggleable && input) {\n      result = {\n        id: context.id,\n        resolve: function(feature) {\n          return feature[context.prop] === context.value;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class CheckboxControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <input type=\"checkbox\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n\n    let input = context.target.nextElementSibling.checked;\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop]\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class GTLTControl {\n  constructor(isDate) {\n    this.id = genId();\n    this.gtName = (isDate)?'after':'at least';\n    this.ltName = (isDate)?'before':'less than';\n  }\n  get next() {\n    return html`\n      <select>\n        <option value=\"gt\">${this.gtName}</option>\n        <option value=\"lt\">${this.ltName}</option>\n      </select>\n      <input type=\"text\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n    context['gt'] = (a, b) => (a >= b);\n    context['lt'] = (a, b) => (a < b);\n\n    const predicate = context[context.target.nextElementSibling.value];\n    const input = context.target.nextElementSibling.nextElementSibling.value;\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            isValid = predicate(feature[context.prop], input);\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class SelectControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <select ?disabled=\"${!this.options}\">\n        <option></option>\n        ${(!this.options)?'':this.options.map((el) => html`\n        <option value=\"${el}\">${el}</option>\n        `)}\n      </select>\n    `;\n  }\n  init(uniques) {\n    if (!this.options) {\n      this.options = Array.from(uniques).sort();\n    }\n  }\n  handle(context) {\n    let result = null;\n\n    const input = context.target.nextElementSibling.value;\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            const value = feature[context.prop]\n            isValid = value === input;\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class TextControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <input type=\"text\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n\n    const input = ('' + context.target.nextElementSibling.value).trim().toUpperCase();\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            const value = ('' + feature[context.prop]).trim().toUpperCase();\n            isValid = value === input;\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}\n\nexport class ContainsControl {\n  constructor() {\n    this.id = genId();\n  }\n  get next() {\n    return html`\n      <input type=\"text\">\n    `;\n  }\n  handle(context) {\n    let result = null;\n\n    const input = ('' + context.target.nextElementSibling.value).trim().toUpperCase();\n    // blank selects all, apply filter if non-blank\n    if (input) {\n      result = {\n        id: context.id,\n        resolveGroup: function(feature) {\n          return !context.group.prop || context.group[context.group.prop] === feature[context.group.prop]\n        },\n        resolve: function(feature) {\n          // filter out features without the property\n          let isValid = !!feature[context.prop];\n          if (isValid) {\n            const value = ('' + feature[context.prop]).trim().toUpperCase();\n            isValid = value.includes(input);\n          }\n          return isValid;\n        }\n      };\n    }\n    return result;\n  }\n}","import {\n  FilterGroup,\n  CheckboxControl,\n  GTLTControl,\n  SelectControl,\n  TextControl,\n  ContainsControl\n} from '../lit/filter-controls.js';\n\nexport class SiteData {\n  constructor(...layer) {\n\n    // Define aggregated data for visualization\n    this._aggrKeys = [\n      'County',\n      'Drill_Meth'\n    ];\n    this.aggrData = [];\n    for (let l of layer) {\n      this.aggrData.push(SiteData._gatherAggrData(l, this._aggrKeys));\n    }\n\n    this.datas = this.aggrData.map((el)=>el.data).reduce((prev, curr)=>prev.concat(curr),[]);\n    this.uniques = {};\n    this._aggrKeys.forEach((key) => this.uniques[key] = new Set(this.datas.map((el)=>el[key]).filter((el)=>!!el)));\n  }\n\n  static _gatherAggrData(layer, aggrKeys) {\n    const aggrData = {\n      aggr: {},\n      data: []\n    };\n\n    // Collect datasets and aggregates\n    layer.eachFeature(function(obj, l) {\n      let result = {};\n      aggrKeys.forEach(function(key) {\n        result[key] = obj.feature.properties[key]\n        if (!aggrData.aggr[key]) {\n          aggrData.aggr[key] = {};\n        }\n        let group = aggrData.aggr[key];\n        if (result[key] && 'number' === typeof result[key]) {\n          if (!group.max || group.max < result[key]) {\n            group.max = result[key];\n          }\n          if (!group.min || group.min > result[key]) {\n            group.min = result[key];\n          }\n        }\n      });\n      aggrData.data.push(result);\n    });\n\n    return aggrData;\n  }\n}\n\nexport const ignoredKeys = [\n  'Site_Code',\n  'Data_Type',\n  'SiteName',\n  'Site_Name',\n  'Wid',\n  'ID'\n];\nexport const keyLookup = {\n  'SiteName': {title: 'Site Name', desc: ''},\n  'Site_Name': {title: 'Site Name', desc: ''},\n  'Wid': {title: 'WID', desc: ''},\n  'ID': {title: 'ID', desc: ''},\n  'RecentLog': {title: 'Most recent log (year)', desc: ''},\n  'MaxDepth': {title: 'Max depth (ft)', desc: ''},\n  'Norm_Res': {title: 'Normal Resistivity', desc: ''},\n  'Caliper': {title: 'Caliper', desc: ''},\n  'Gamma': {title: 'Natural Gamma', desc: ''},\n  'SP': {title: 'Spontaneous (Self) Potential', desc: ''},\n  'SPR': {title: 'Single Point Resistivity', desc: ''},\n  'Spec_Gamma': {title: 'Spectral Gamma', desc: ''},\n  'Fluid_Cond': {title: 'Fluid Conductivity', desc: ''},\n  'Flow_Spin': {title: 'Spinner Flow Meter', desc: ''},\n  'Fluid_Temp': {title: 'Fluid Temperature', desc: ''},\n  'Fluid_Res': {title: 'Fluid Resistivity', desc: ''},\n  'OBI': {title: 'Optical Borehole Image (OBI)', desc: ''},\n  'ABI': {title: 'Acoustic Borehole Image (ABI)', desc: ''},\n  'Video': {title: 'Video', desc: ''},\n  'Drill_Year': {title: 'Drill year', desc: ''},\n  'Depth_Ft': {title: 'Depth (ft)', desc: ''},\n  'Drill_Meth': {title: 'Drill Method', desc: ''},\n  'Subsamples': {title: 'Subsamples', desc: ''},\n  'Photos': {title: 'Core Photos', desc: ''},\n  'Grainsize': {title: 'Grainsize', desc: ''},\n};\n\nexport const filterLookup = [\n  new FilterGroup({\n    title: \"Site Information\",\n    open: true,\n    sections: [\n      {\n        fields: {\n          \"County\": {\n            controls: [\n              new SelectControl()\n            ]\n          },\n          // \"SiteName\": {\n          //   controls: [\n          //     new ContainsControl()\n          //   ]\n          // },\n          \"Site_Name\": {\n            controls: [\n              new ContainsControl()\n            ]\n          },\n          \"Wid\": {\n            controls: [\n              new TextControl()\n            ]\n          },\n        }\n      }\n    ]\n  }),\n  new FilterGroup({\n    title: \"Geophysical Log Data\",\n    prop: 'Data_Type',\n    'Data_Type': 'Geophysical Log Data',\n    toggleable: true,\n    sections: [\n      {\n        fields: {\n          \"RecentLog\": {\n            controls: [\n              new GTLTControl(true)\n            ]\n          },\n          \"MaxDepth\": {\n            controls: [\n              new GTLTControl()\n            ]\n          }\n        }\n      },\n      {\n        title: \"Geologic\",\n        fields: {\n          \"Norm_Res\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Caliper\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Gamma\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"SP\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"SPR\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Spec_Gamma\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n\n        }\n      },\n      {\n        title: \"Hydrogeologic\",\n        fields: {\n          \"Fluid_Cond\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Flow_Spin\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Fluid_Temp\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Fluid_Res\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Flow_HP\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n\n        }\n      },\n      {\n        title: \"Image\",\n        fields: {\n          \"OBI\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"ABI\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Video\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n\n        }\n      }\n    ]\n  }),\n  new FilterGroup({\n    title: \"Quaternary Core Data\",\n    prop: 'Data_Type',\n    'Data_Type': 'Quaternary Core Data',\n    toggleable: true,\n    sections: [\n      {\n        fields: {\n          \"Drill_Year\": {\n            controls: [\n              new GTLTControl(true)\n            ]\n          },\n          \"Depth_Ft\": {\n            controls: [\n              new GTLTControl()\n            ]\n          },\n          \"Drill_Meth\": {\n            controls: [\n              new SelectControl()\n            ]\n          },\n        }\n      },\n      {\n        title: \"Analyses available\",\n        fields: {\n          \"Subsamples\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Photos\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          },\n          \"Grainsize\": {\n            controls: [\n              new CheckboxControl()\n            ]\n          }\n        }\n      }\n    ]\n  })\n];","import { LitElement, html, css } from 'lit-element';\n\nlet pdfjsLib = window['pdfjs-dist/build/pdf'];\n\nconst TOGGLE_EVENT = 'toggle-pdf';\n\nexport class PDFView extends LitElement {\n  static get properties() {\n    return {\n      pdfsrc: {\n        type: String\n      },\n      imgsrc: {\n        type: String\n      }\n    };\n  }\n\n  buildImgSrc() {\n    if (this.pdfsrc) {\n      let renderRoot = this.renderRoot;\n      let canvasEl = document.createElement('canvas');\n      let loadingTask = pdfjsLib.getDocument(this.pdfsrc);\n      return loadingTask.promise.then(function(pdf) {\n        // console.log('PDF Loaded');\n        var pageNumber = 1;\n        return pdf.getPage(pageNumber).then(function(page) {\n          // console.log('Page loaded');\n          \n          var scale = 1.0;\n          var viewport = page.getViewport({scale: scale});\n\n          // Prepare canvas using PDF page dimensions\n          var canvas = canvasEl;\n          var context = canvas.getContext('2d');\n          canvas.height = viewport.height;\n          canvas.width = viewport.width;\n\n          // Render PDF page into canvas context\n          var renderContext = {\n            canvasContext: context,\n            viewport: viewport\n          };\n          var renderTask = page.render(renderContext);\n          return renderTask.promise.then(function () {\n            // console.log('Page rendered');\n            let durl = canvasEl.toDataURL();\n            return durl;\n          });\n        });\n      }, function (reason) {\n        console.error(reason);\n      });\n    }\n    return Promise.resolve(null);\n  }\n\n  constructor() {\n    super();\n  }\n\n  static get styles() {\n    return css`\n      div {\n        min-height: 10em;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      img {\n        max-width: 45vw;\n      }\n    `;\n  }\n\n  render() {\n    return html`\n    <div>\n      ${(!this.imgsrc)?'':html`\n      <img src=\"${this.imgsrc}\" />\n      `}\n    </div>\n    `;\n  }\n\n  updated(old) {\n    var el = this;\n    if (old.has('pdfsrc')) {\n      if (el.pdfsrc) {\n        el.buildImgSrc().then(function(url) {\n          el.imgsrc = url;\n        })\n      } else {\n        el.imgsrc = null;\n      }\n    }\n  }\n}\ncustomElements.define('pdf-view', PDFView);\n\nexport class PDFViewPanel extends LitElement {\n  static get properties() {\n    return {\n\n    };\n  }\n\n  constructor() {\n    super();\n  }\n\n  static get styles() {\n    return css`\n    :host {\n      overflow: auto;\n    }\n    div {\n      min-height: 10em;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    `;\n  }\n\n  render() {\n    return html`\n    <div>\n      <slot></slot>\n    </div>\n    `;\n  }\n\n  handleSketchToggle(e) {\n    if (e.detail.closed) {\n      this.setAttribute('data-closed', true);\n    } else {\n      this.removeAttribute('data-closed');\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    document.addEventListener(TOGGLE_EVENT, this.handleSketchToggle.bind(this));\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener(TOGGLE_EVENT, this.handleSketchToggle.bind(this));\n    super.disconnectedCallback();\n  }\n}\ncustomElements.define('pdf-view-panel', PDFViewPanel);\n\nexport class PDFViewButton extends LitElement {\n  static get properties() {\n    return {\n      buttonText: {\n        type: String,\n        attribute: 'button-text'\n      },\n      closedText: {\n        type: String,\n        attribute: 'closed-text'\n      },\n      openedText: {\n        type: String,\n        attribute: 'opened-text'\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.closed=true;\n  }\n\n  static get styles() {\n    return css`\n    `;\n  }\n\n  render() {\n    return html`\n    <button @click=\"${this.toggle}\">${this.buttonText}</button>\n    `;\n  }\n\n  firstUpdated() {\n    if (this.closedText && this.openedText) {\n      this.buttonText = (this.closed)?this.closedText: this.openedText;\n    } else {\n      if (!this.buttonText) {\n        this.buttonText = \"toggle\";\n      }\n    }\n  }\n\n  toggle() {\n    this.closed = !this.closed;\n    if (this.closedText && this.openedText) {\n      this.buttonText = (this.closed)?this.closedText:this.openedText;\n    }\n    this.dispatchEvent(new CustomEvent(TOGGLE_EVENT, {bubbles: true, detail: {closed: this.closed}}));\n  }\n}\ncustomElements.define('pdf-view-button', PDFViewButton);","import { LitElement, html, css } from 'lit-element';\nimport { genId } from '../js/common.js';\nimport { ignoredKeys, keyLookup } from '../app/site-data.js';\nexport { PDFView, PDFViewPanel, PDFViewButton } from './pdf-view.js';\n\nexport class SiteDetails extends LitElement {\n  static get properties() {\n    return {\n      siteinfo: {\n        type: Object\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.genId = (function() {\n      const memo = {};\n      return function(index) {\n        if (!memo[index]) {\n          memo[index] = genId();\n        }\n        return memo[index];\n      }\n    })();\n  }\n\n  static get styles() {\n    return css`\n      [data-element=\"table\"] {\n        display: grid;\n        grid-template-columns: 40% 1fr;\n        grid-gap: var(--border-radius);\n        margin: 0 var(--border-radius);\n      }\n\n      .label {\n        /* background-color: var(--palette-dark); */\n        font-weight: var(--font-weight-bold);\n      }\n\n      .detail {\n        /* background-color: var(--palette-light); */\n      }\n\n      .header {\n        position: -webkit-sticky;\n        position: sticky;\n        top: 0px;\n        background-color: var(--palette-white);\n        padding: var(--font-size-extra-large);\n        z-index: 10;\n        width: 100%;\n        box-sizing: border-box;\n        display: flex;\n        justify-content: space-between;\n      }\n      .header h1 {\n        padding: 0;\n        max-width: 70%;\n        text-align: center;\n      }\n      .header i {\n        font-size: var(--icon-size-large);\n        color: var(--palette-accent);\n        cursor: pointer;\n      }\n      \n      [data-closed] {\n        display: none;\n      }\n    `;\n  }\n\n  renderTable(info) {\n    let key = 0, value = 1;\n    return Object.entries(info).filter((el, index) => {\n      return !ignoredKeys.includes(el[key]);\n    }).map((el, index) => html`\n    <td class=\"label\" title=\"${(keyLookup[el[key]])?keyLookup[el[key]].desc:el[key]}\">\n      <label for=\"${this.genId(index)}\" >\n        ${(keyLookup[el[key]])?keyLookup[el[key]].title:el[key]}\n      </label>\n    </td>\n    <td class=\"detail\" title=\"${(keyLookup[el[key]])?keyLookup[el[key]].desc:el[key]}\">\n      <span id=\"${this.genId(index)}\">\n        ${el[value]}\n      </span>\n    </td>\n  `)\n  }\n\n  render() {\n    let Latitude = (this.siteinfo)?this.siteinfo['Latitude']:null;\n    let Longitude = (this.siteinfo)?this.siteinfo['Longitude']:null;\n    let WID = (this.siteinfo)?this.siteinfo['Wid']:null;\n    return html`\n      <style>\n        @import url(\"./css/typography.css\");\n      </style>\n\n      ${(!this.siteinfo)? '' : html`\n        <div class=\"header\">\n          <span>\n            <a href=\"${window.router.link('entry')}\" onclick=\"event.preventDefault()\"><i class=\"material-icons clear-selection\" title=\"Clear selection\" @click=\"${this.fireClearSelection}\" >arrow_back</i></a>\n          </span>\n          <h1>${this.siteinfo.SiteName || this.siteinfo.Site_Name}</h1>\n          <span></span>\n        </div>\n        <div data-element=\"table\">\n          ${this.renderTable({\n            Latitude, Longitude, WID\n          })}\n        </div>\n        <h2>Data Available:</h2>\n        <app-collapsible open>\n          <span slot=\"header\">${this.siteinfo['Data_Type']}</span>\n          <div slot=\"content\">\n            <div data-element=\"table\">\n              ${this.renderTable(this.siteinfo)}\n            </div>\n            <slot name=\"sketch\"></slot>\n          </div>\n        </app-collapsible>\n      `}\n    `;\n  }\n\n  fireClearSelection() {\n    let event = new CustomEvent('clear-selection', {\n      bubbles: true,\n      detail: {}\n    });\n    this.dispatchEvent(event);\n  }\n}\ncustomElements.define('site-details', SiteDetails);","import { LitElement, html, css } from 'lit-element';\nimport { genId, dispatch } from '../js/common.js';\n\n/**\n * Code use and modified from\n * https://alligator.io/css/collapsible/\n */\nexport class AppCollapsible extends LitElement {\n  static get properties() {\n    return {\n      genId: {\n        type: String,\n        attribute: false\n      },\n      open: {\n        type: Boolean\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.genId = genId();\n  }\n\n  static get styles() {\n    return css`\n    .wrap-collapsible {\n      margin: var(--border-radius) 0;\n    }\n\n    input[type='checkbox'] {\n      display: none;\n    }\n\n    .lbl-toggle {\n      display: block;\n\n      font-weight: var(--font-weight-bold);\n      font-size: var(--font-size-extra-large);\n      text-align: center;\n\n      padding: var(--border-radius);\n\n      color: var(--palette-accent);\n      background: var(--palette-light);\n\n      cursor: pointer;\n\n      border-radius: var(--border-radius);\n      transition: all 0.3s cubic-bezier(0.755, 0.05, 0.855, 0.06);\n    }\n\n    .lbl-toggle:hover {\n      color: var(--palette-900);\n    }\n\n    .lbl-toggle:focus {\n      outline: thin dotted;\n    }\n\n    .collapsible-content {\n      max-height: 0px;\n      overflow: hidden;\n      transition: max-height 0.3s cubic-bezier(0.86, 0, 0.07, 1);\n    }\n\n    .toggle:checked + .lbl-toggle + .collapsible-content {\n      max-height: var(--collapsible-max-height, 3000px);\n    }\n\n    .toggle:checked + .lbl-toggle {\n      border-bottom-right-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n\n    .collapsible-content .content-inner {\n      background: var(--palette-white);\n      border-bottom: 1px solid var(--palette-light);\n      border-right: 1px solid var(--palette-light);\n      border-left: 1px solid var(--palette-light);\n      border-bottom-left-radius: var(--border-radius);\n      border-bottom-right-radius: var(--border-radius);\n      padding: var(--font-size);\n    }\n    .collapsible-header {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n      }\n    `;\n  }\n\n  render() {\n    return html`\n    <div class=\"wrap-collapsible\">\n      <input id=\"${this.genId}\" class=\"toggle\" type=\"checkbox\" ?checked=\"${this.open}\" @change=${this._handleChange}>\n      <label for=\"${this.genId}\" class=\"lbl-toggle\" tabindex=\"0\">\n        <div class=\"collapsible-header\">\n          <div><slot name=\"header-before\"></slot></div>\n          <div><slot name=\"header\"></slot></div>\n          <div><slot name=\"header-after\"></slot></div>\n        </div>\n      </label>\n      <div class=\"collapsible-content\">\n        <div class=\"content-inner\">\n          <slot name=\"content\"></slot>\n        </div>\n      </div>\n    </div>\n    `;\n  }\n\n  firstUpdated() {\n    let myLabels = this.renderRoot.querySelectorAll('.lbl-toggle');\n\n    Array.from(myLabels).forEach(label => {\n      label.addEventListener('keydown', e => {\n        // 32 === spacebar\n        // 13 === enter\n        if (e.which === 32 || e.which === 13) {\n          e.preventDefault();\n          label.click();\n        };\n      });\n    });\n  }\n\n  updated(changed) {\n    let eventName = 'open';\n    if (changed.has(eventName)) {\n      dispatch(this, eventName, { value: this[eventName] });\n    }\n  }\n\n  _handleChange(e) {\n    this.open = e.target.checked;\n  }\n}\ncustomElements.define('app-collapsible', AppCollapsible);","import { LitElement, html, css } from 'lit-element';\nimport { genId } from '../js/common.js';\n\n\nexport class InRadio extends LitElement {\n  static get properties() {\n    return {\n      inName: {\n        type: String,\n        attribute: 'in-name'\n      },\n      choices: {\n        type: Array\n      },\n      choice: {\n        type: String,\n        reflect: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this.checked = [];\n    this.genId = (function() {\n      const memo = {};\n      return function(index) {\n        if (!memo[index]) {\n          memo[index] = genId();\n        }\n        return memo[index];\n      }\n    })();\n  }\n\n  firstUpdated() {\n    if (!this.choice && this.choices) {\n      this.choice = this.choices[0];\n    }\n  }\n\n  updated() {\n    let event = new CustomEvent('choice-change', {\n      detail: {\n        choice: this.choice\n      }\n    });\n    this.dispatchEvent(event);\n  }\n\n  inChange(e) {\n    this.choice = e.target.value;\n  }\n\n  render() {\n    return html`\n      ${this.choices.map((item, index) => html`\n        <div class=\"choice\">\n          <input \n            type=\"radio\" \n            name=\"${this.inName}\" \n            id=\"${this.genId(index)}\" \n            value=\"${item}\" \n            .checked=\"${(this.choice === item)}\" \n            @change=\"${this.inChange}\"\n          >\n          <label for=\"${this.genId(index)}\">${item}</label>\n        </div>\n      `)}\n    `;\n  }\n}\ncustomElements.define('in-radio', InRadio);","import { LitElement, html, css } from 'lit-element';\nimport { genId, dispatch } from '../js/common.js';\n\nexport class ToggleSwitch extends LitElement {\n  static get properties() {\n    return {\n      checked: {\n        type: Boolean\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    if (!this.id) {\n      this.id = genId();\n    }\n  }\n\n  static get styles() {\n    return css`\n    :host {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    input[type=checkbox]{\n      height: 0;\n      width: 0;\n      margin: 0;\n      visibility: hidden;\n    }\n\n    label {\n      cursor: pointer;\n      text-indent: -9999px;\n      width: calc(2 * var(--icon-size));\n      height: var(--icon-size);\n      background: var(--palette-accent);\n      display: block;\n      border-radius: var(--icon-size);\n      position: relative;\n    }\n\n    label:after {\n      content: '';\n      position: absolute;\n      top: calc(calc(var(--icon-size) - var(--icon-size-small)) / 2);\n      left: calc(calc(var(--icon-size) - var(--icon-size-small)) / 2);\n      width: var(--icon-size-small);\n      height: var(--icon-size-small);\n      background: var(--palette-white);\n      border-radius: var(--icon-size-small);\n      transition: 0.3s;\n    }\n\n    input:checked + label {\n      background: var(--palette-active);\n    }\n\n    input:checked + label:after {\n      left: calc(100% - calc(calc(var(--icon-size) - var(--icon-size-small)) / 2));\n      transform: translateX(-100%);\n    }\n\n    label:active:after {\n      width: calc(var(--icon-size-small) + calc(calc(var(--icon-size) - var(--icon-size-small)) / 2));\n    }\n    `;\n  }\n\n  render() {\n    return html`\n    <input type=\"checkbox\" id=\"switch\" .checked=${this.checked} @change=${this.handleChange} /><label for=\"switch\">Toggle</label>\n    `;\n  }\n\n  updated(changed) {\n    if (changed.has('checked')) {\n      dispatch(this, 'change', {checked: this.checked}, true);\n    }\n  }\n\n  handleChange(e) {\n    this.checked = e.target.checked;\n  }\n\n  toggle() {\n    this.checked = !this.checked;\n  }\n}\ncustomElements.define('toggle-switch', ToggleSwitch);","import { LitElement, html, css } from 'lit-element';\nimport { genId } from '../js/common.js';\nimport { keyLookup, filterLookup } from '../app/site-data.js';\nexport { AppCollapsible } from './app-collapsible.js';\nexport { InRadio } from './in-radio.js';\nexport { ToggleSwitch } from './toggle-switch.js';\n\nexport class MapFilter extends LitElement {\n  static get properties() {\n    return {\n      include: {\n        type: Array,\n        attribute: false\n      },\n      filter: {\n        type: Array,\n        attribute: false\n      },\n      matchClass: {\n        type: String,\n        attribute: false\n      }\n    };\n  }\n\n  static get styles() {\n    return css`\n      .field {\n        display: grid;\n        grid-template-columns: 40% 1fr;\n        grid-gap: var(--border-radius);\n        margin: 0 var(--border-radius);\n      }\n\n      .label {\n        font-weight: var(--font-weight-bold);\n      }\n\n      .selector {\n      }\n\n      .section-title {\n        margin: var(--line-height) 0 0 0;\n        padding: var(--border-radius);\n        background-color: var(--palette-light);\n      }\n\n      in-radio {\n        display: inline-grid;\n        grid-template-columns: auto auto;\n      }\n    `;\n  }\n\n  updateMatchClass(e) {\n    this.matchClass = e.target.choice;\n  }\n\n  render() {\n    return html`\n      <style>\n        @import url(\"./css/typography.css\");\n      </style>\n      <div>\n        Show sites that have <in-radio choices='[\"ALL\", \"ANY\"]' @choice-change=\"${this.updateMatchClass}\"></in-radio> of the following:\n      </div>\n      <div>\n        ${this.renderFilterGroups()}\n      </div>\n    `;\n  }\n\n  resolveKeyLookup(field) {\n    let result = (!keyLookup[field])?field:keyLookup[field].title;\n    return result;\n  }\n\n  renderFilterGroups() {\n    let name=0, config=1;\n    return this.filterGroups.map((group) => html`\n      <app-collapsible\n        ?open=${group.open} @open=${this._handle(group)}>\n        <i slot=\"header-before\" class=\"material-icons\">expand_more</i>\n        <span slot=\"header\">${group.title}</span>\n        ${(!group.toggleable)?'':html`\n          <toggle-switch\n            name=\"${group.mapName}\"\n            slot=\"header-after\"\n            ?checked=${group.open}\n            @change=${this._handleGroup(group, this.include)}\n          ></toggle-switch>\n        `}\n        <div slot=\"content\">\n          ${group.sections.map((section, index) => html`\n            ${!(section.title)?'':html`\n              <h2 class=\"section-title\">${section.title}</h2>\n            `}\n            ${Object.entries(section.fields).map((entry, index) => html`\n              <div class=\"field\">\n              ${(entry[config].controls.length === 0)?'':entry[config].controls.map(control => html`\n                <td class=\"label\">\n                  <label for=\"${this.genId(index)}\" >\n                    ${this.resolveKeyLookup(entry[name])}\n                  </label>\n                </td>\n                <td class=\"selector\" \n                    @change=\"${this._handleControl(group, control, this.filter)}\">\n                  <input\n                    type=\"hidden\"\n                    id=\"${control.id}\"\n                    name=\"${entry[name]}\">\n                  ${control.next}\n                </td>\n              `)}\n              </div>\n            `)}\n          `)}\n        </div>\n      </app-collapsible>\n    `);\n  }\n\n  get _eventHandlers() {\n    return {\n      'open' : (context, e) => {\n        context.open = e.detail.value;\n      }\n    }\n  }\n\n  _handle(context) {\n    return (e) => {\n      const handler = this._eventHandlers[e.type];\n      if (handler) {\n        handler(context, e);\n        this.requestUpdate();\n      }\n    }\n  }\n\n  _handleGroup(group, filter) {\n    const id = group.id;\n    const handle = group.activate.bind(group);\n    return (e) => {\n      const context = {};\n      context.id = id;\n      context.toggleable = group.toggleable;\n      context.detail = e.detail;\n      context.prop = group.prop;\n      context.value = group[group.prop];\n      removeFromFilter(filter, id);\n      let resolver = handle(context);\n      if (resolver) {\n        filter.push(resolver);\n      }\n      this.requestUpdate();\n    }\n  }\n\n  _handleControl(group, control, filter) {\n    const id = control.id;\n    const handle = control.handle.bind(control);\n    return (e) => {\n      const context = {};\n      context.id = id;\n      context.group = group;\n      context.target = e.currentTarget.querySelector('#'+id);\n      context.prop = context.target.name;\n      removeFromFilter(filter, id);\n      let resolver = handle(context);\n      if (resolver) {\n        filter.push(resolver);\n      }\n      this.requestUpdate();\n    }\n  }\n\n  updated(changed) {\n    let matchClass = this.matchClass;\n    let incl = this.include;\n    let filt = this.filter;\n    if (window.siteMap) {\n      window.siteMap.map.fire('filterpoints', {\n        detail: {\n          resolve: function(props) {\n            let included = incl.length > 0 && incl.reduce((prev, curr) => {\n              return prev || curr.resolve(props);\n            }, false);\n            let spec = filt.filter((rule) => rule.resolveGroup(props));\n            let result = included && spec.length < 1;\n            if (included && !result) {\n              if (\"ALL\" === matchClass) {\n                result = spec.reduce((prev, curr) => {\n                  return prev && curr.resolve(props);\n                }, true);\n              } else {\n                result = spec.reduce((prev, curr) => {\n                  return prev || curr.resolve(props);\n                }, false);\n              }\n            }\n            return result;\n          }\n        }\n      });\n    }\n  }\n\n  init(uniques) {\n    this.filterGroups.forEach((group) => {\n      group.sections.forEach((section) => {\n        Object.entries(section.fields).forEach((field) => {\n          field[1].controls.forEach((control) => {\n            if (control.init) {\n              control.init(uniques[field[0]]);\n            }\n          })\n        })\n      })\n    });\n    this.requestUpdate();\n  }\n\n  constructor() {\n    super();\n    this.genId = (function() {\n      const memo = {};\n      return function(index) {\n        if (!memo[index]) {\n          memo[index] = genId();\n        }\n        return memo[index];\n      }\n    })();\n    this.include = [];\n    this.filter = [];\n    this.filterGroups = filterLookup;\n  }\n}\ncustomElements.define('map-filter', MapFilter);\n\nconst removeFromFilter = (filter, id) => {\n  for (\n    var idx = filter.findIndex(el => el.id === id); \n    idx >= 0;\n    idx = filter.findIndex(el => el.id === id)\n  ) {\n    filter.splice(idx, 1);\n  }\n}\n\n"],"names":["AppSidebar","LitElement","properties","title","type","String","tabs","Array","[object Object]","super","styles","css","choice","this","shadowRoot","querySelectorAll","forEach","el","getAttribute","hidden","e","switchTab","detail","html","map","genId","Math","random","toString","substr","dispatch","context","eventName","bubbles","composed","dispatchEvent","CustomEvent","customElements","define","FilterGroup","config","Object","assign","id","result","input","checked","toggleable","resolve","feature","prop","value","CheckboxControl","next","target","nextElementSibling","resolveGroup","group","GTLTControl","isDate","gtName","ltName","a","b","predicate","isValid","SelectControl","options","uniques","from","sort","ignoredKeys","keyLookup","SiteName","desc","Site_Name","Wid","ID","RecentLog","MaxDepth","Norm_Res","Caliper","Gamma","SP","SPR","Spec_Gamma","Fluid_Cond","Flow_Spin","Fluid_Temp","Fluid_Res","OBI","ABI","Video","Drill_Year","Depth_Ft","Drill_Meth","Subsamples","Photos","Grainsize","filterLookup","open","sections","fields","County","controls","trim","toUpperCase","includes","Data_Type","Flow_HP","pdfjsLib","window","TOGGLE_EVENT","pdfsrc","imgsrc","renderRoot","canvasEl","document","createElement","getDocument","promise","then","pdf","getPage","page","viewport","getViewport","scale","canvas","getContext","height","width","renderContext","canvasContext","render","toDataURL","reason","console","error","Promise","old","has","buildImgSrc","url","closed","setAttribute","removeAttribute","connectedCallback","addEventListener","handleSketchToggle","bind","removeEventListener","disconnectedCallback","buttonText","attribute","closedText","openedText","toggle","SiteDetails","siteinfo","memo","index","info","entries","filter","Latitude","Longitude","WID","router","link","fireClearSelection","renderTable","event","Boolean","_handleChange","myLabels","label","which","preventDefault","click","changed","inName","choices","reflect","item","inChange","handleChange","MapFilter","include","matchClass","updateMatchClass","renderFilterGroups","field","filterGroups","_handle","mapName","_handleGroup","section","entry","length","control","resolveKeyLookup","_handleControl","_eventHandlers","handler","requestUpdate","handle","activate","removeFromFilter","resolver","push","currentTarget","querySelector","name","incl","filt","siteMap","fire","props","included","reduce","prev","curr","spec","rule","init","idx","findIndex","splice"],"mappings":"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"}