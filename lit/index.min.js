!(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lit-element"),require("@uirouter/core")):"function"==typeof define&&define.amd?define(["exports","lit-element","@uirouter/core"],t):t((e=e||self).index={},e.common,e.common)})(this,function(e,t,i){"use strict";class r extends t.LitElement{static get properties(){return{title:{type:String},tabs:{type:Array}}}constructor(){super()}static get styles(){return t.css`:host{padding:0 var(--border-radius)}`}switchTab(e){this.shadowRoot.querySelectorAll("slot").forEach(t=>{"default"===e&&!t.getAttribute("name")||t.getAttribute("name")===e?t.hidden=!1:t.hidden=!0})}handleChoiceChange(e){this.switchTab(e.detail.choice)}render(){return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}</style>${this.title?t.html`<h1 class=header>${this.title}</h1>`:""}<slot></slot>${this.tabs?this.tabs.map(e=>t.html`<slot name=${e} hidden></slot>`):""}`}}function o(){return"_"+Math.random().toString(36).substr(2,9)}function n(e,t,i,r,o){e.dispatchEvent(new CustomEvent(t,{bubbles:r,composed:o,detail:i}))}customElements.define("app-sidebar",r);class l{constructor(e){Object.assign(this,e),this.id||(this.id=o())}activate(e){let t=null;const i=e.detail.checked;return e.toggleable&&i&&(t={id:e.id,resolve:function(t){return t[e.prop]===e.value}}),t}}class s{constructor(){this.id=o()}get next(){return t.html`<input type=checkbox>`}handle(e){let t=null;return e.target.nextElementSibling.checked&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){return!!t[e.prop]}}),t}}class a{constructor(e){this.id=o(),this.gtName=e?"after":"at least",this.ltName=e?"before":"less than"}get next(){return t.html`<select><option value=gt>${this.gtName}</option><option value=lt>${this.ltName}</option></select> <input type=text>`}handle(e){let t=null;e.gt=((e,t)=>e>=t),e.lt=((e,t)=>e<t);const i=e[e.target.nextElementSibling.value],r=e.target.nextElementSibling.nextElementSibling.value;return r&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let o=!!t[e.prop];return o&&(o=i(t[e.prop],r)),o}}),t}}class c{constructor(){this.id=o()}get next(){return t.html`<select ?disabled=${!this.options}><option></option>${this.options?this.options.map(e=>t.html`<option value=${e}>${e}</option>`):""}</select>`}init(e){this.options||(this.options=Array.from(e).sort())}handle(e){let t=null;const i=e.target.nextElementSibling.value;return i&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let r=!!t[e.prop];if(r){r=t[e.prop]===i}return r}}),t}}const d=["Site_Code","Data_Type","SiteName","Site_Name","Wid","ID"],h={SiteName:{title:"Site Name",desc:""},Site_Name:{title:"Site Name",desc:""},Wid:{title:"WID",desc:""},ID:{title:"ID",desc:""},RecentLog:{title:"Most recent log (year)",desc:""},MaxDepth:{title:"Max depth (ft)",desc:""},Norm_Res:{title:"Normal Resistivity",desc:""},Caliper:{title:"Caliper",desc:""},Gamma:{title:"Natural Gamma",desc:""},SP:{title:"Spontaneous (Self) Potential",desc:""},SPR:{title:"Single Point Resistivity",desc:""},Spec_Gamma:{title:"Spectral Gamma",desc:""},Fluid_Cond:{title:"Fluid Conductivity",desc:""},Flow_Spin:{title:"Spinner Flow Meter",desc:""},Fluid_Temp:{title:"Fluid Temperature",desc:""},Fluid_Res:{title:"Fluid Resistivity",desc:""},OBI:{title:"Optical Borehole Image (OBI)",desc:""},ABI:{title:"Acoustic Borehole Image (ABI)",desc:""},Video:{title:"Video",desc:""},Drill_Year:{title:"Drill year",desc:""},Depth_Ft:{title:"Depth (ft)",desc:""},Drill_Meth:{title:"Drill Method",desc:""},Subsamples:{title:"Subsamples",desc:""},Photos:{title:"Core Photos",desc:""},Grainsize:{title:"Grainsize",desc:""}},p=[new l({title:"Site Information",open:!0,sections:[{fields:{County:{controls:[new c]},Site_Name:{controls:[new class{constructor(){this.id=o()}get next(){return t.html`<input type=text>`}handle(e){let t=null;const i=(""+e.target.nextElementSibling.value).trim().toUpperCase();return i&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let r=!!t[e.prop];return r&&(r=(""+t[e.prop]).trim().toUpperCase().includes(i)),r}}),t}}]},Wid:{controls:[new class{constructor(){this.id=o()}get next(){return t.html`<input type=text>`}handle(e){let t=null;const i=(""+e.target.nextElementSibling.value).trim().toUpperCase();return i&&(t={id:e.id,resolveGroup:function(t){return!e.group.prop||e.group[e.group.prop]===t[e.group.prop]},resolve:function(t){let r=!!t[e.prop];return r&&(r=(""+t[e.prop]).trim().toUpperCase()===i),r}}),t}}]}}}]}),new l({title:"Geophysical Log Data",prop:"Data_Type",Data_Type:"Geophysical Log Data",toggleable:!0,sections:[{fields:{RecentLog:{controls:[new a(!0)]},MaxDepth:{controls:[new a]}}},{title:"Geologic",fields:{Norm_Res:{controls:[new s]},Caliper:{controls:[new s]},Gamma:{controls:[new s]},SP:{controls:[new s]},SPR:{controls:[new s]},Spec_Gamma:{controls:[new s]}}},{title:"Hydrogeologic",fields:{Fluid_Cond:{controls:[new s]},Flow_Spin:{controls:[new s]},Fluid_Temp:{controls:[new s]},Fluid_Res:{controls:[new s]},Flow_HP:{controls:[new s]}}},{title:"Image",fields:{OBI:{controls:[new s]},ABI:{controls:[new s]},Video:{controls:[new s]}}}]}),new l({title:"Quaternary Core Data",prop:"Data_Type",Data_Type:"Quaternary Core Data",toggleable:!0,sections:[{fields:{Drill_Year:{controls:[new a(!0)]},Depth_Ft:{controls:[new a]},Drill_Meth:{controls:[new c]}}},{title:"Analyses available",fields:{Subsamples:{controls:[new s]},Photos:{controls:[new s]},Grainsize:{controls:[new s]}}}]})];let u=window["pdfjs-dist/build/pdf"];const g="toggle-pdf";customElements.define("pdf-view",class extends t.LitElement{static get properties(){return{pdfsrc:{type:String},imgsrc:{type:String}}}buildImgSrc(){if(this.pdfsrc){this.renderRoot;let e=document.createElement("canvas");return u.getDocument(this.pdfsrc).promise.then(function(t){return t.getPage(1).then(function(t){var i=t.getViewport({scale:1}),r=e,o=r.getContext("2d");r.height=i.height,r.width=i.width;var n={canvasContext:o,viewport:i};return t.render(n).promise.then(function(){return e.toDataURL()})})},function(e){console.error(e)})}return Promise.resolve(null)}constructor(){super()}static get styles(){return t.css`div{min-height:10em;display:flex;align-items:center;justify-content:center}img{max-width:45vw}`}render(){return t.html`<div>${this.imgsrc?t.html`<img src=${this.imgsrc}>`:""}</div>`}updated(e){var t=this;e.has("pdfsrc")&&(t.pdfsrc?t.buildImgSrc().then(function(e){t.imgsrc=e}):t.imgsrc=null)}});customElements.define("pdf-view-panel",class extends t.LitElement{static get properties(){return{}}constructor(){super()}static get styles(){return t.css`:host{overflow:auto}div{min-height:10em;display:flex;align-items:center;justify-content:center}`}render(){return t.html`<div><slot></slot></div>`}handleSketchToggle(e){e.detail.closed?this.setAttribute("data-closed",!0):this.removeAttribute("data-closed")}connectedCallback(){super.connectedCallback(),document.addEventListener(g,this.handleSketchToggle.bind(this))}disconnectedCallback(){document.removeEventListener(g,this.handleSketchToggle.bind(this)),super.disconnectedCallback()}});customElements.define("pdf-view-button",class extends t.LitElement{static get properties(){return{buttonText:{type:String,attribute:"button-text"},closedText:{type:String,attribute:"closed-text"},openedText:{type:String,attribute:"opened-text"}}}constructor(){super(),this.closed=!0}static get styles(){return t.css``}render(){return t.html`<button @click=${this.toggle}>${this.buttonText}</button>`}firstUpdated(){this.closedText&&this.openedText?this.buttonText=this.closed?this.closedText:this.openedText:this.buttonText||(this.buttonText="toggle")}toggle(){this.closed=!this.closed,this.closedText&&this.openedText&&(this.buttonText=this.closed?this.closedText:this.openedText),this.dispatchEvent(new CustomEvent(g,{bubbles:!0,detail:{closed:this.closed}}))}});class m extends t.LitElement{static get properties(){return{siteinfo:{type:Object}}}constructor(){super(),this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=o()),e[t]}})()}static get styles(){return t.css`[data-element=table]{display:grid;grid-template-columns:40% 1fr;grid-gap:var(--border-radius);margin:0 var(--border-radius)}.label{font-weight:var(--font-weight-bold)}.header{position:-webkit-sticky;position:sticky;top:0;background-color:var(--palette-white);padding:var(--font-size-extra-large);z-index:10;width:100%;box-sizing:border-box;display:flex;justify-content:space-between}.header h1{padding:0;max-width:70%;text-align:center}.header i{font-size:var(--icon-size-large);color:var(--palette-accent);cursor:pointer}[data-closed]{display:none}`}renderTable(e){return Object.entries(e).filter((e,t)=>!d.includes(e[0])).map((e,i)=>t.html`<td class=label title=${h[e[0]]?h[e[0]].desc:e[0]}><label for=${this.genId(i)}>${h[e[0]]?h[e[0]].title:e[0]}</label></td><td class=detail title=${h[e[0]]?h[e[0]].desc:e[0]}><span id=${this.genId(i)}>${e[1]}</span></td>`)}render(){let e=this.siteinfo?this.siteinfo.Latitude:null,i=this.siteinfo?this.siteinfo.Longitude:null,r=this.siteinfo?this.siteinfo.Wid:null;return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}</style>${this.siteinfo?t.html`<div class=header><span><a href=${window.router.link("entry")} onclick=event.preventDefault()><i class="material-icons clear-selection" title="Clear selection" @click=${this.fireClearSelection}>arrow_back</i></a></span><h1>${this.siteinfo.SiteName||this.siteinfo.Site_Name}</h1><span></span></div><div data-element=table>${this.renderTable({Latitude:e,Longitude:i,WID:r})}</div><h2>Data Available:</h2><app-collapsible open><span slot=header>${this.siteinfo.Data_Type}</span><div slot=content><div data-element=table>${this.renderTable(this.siteinfo)}</div><slot name=sketch></slot></div></app-collapsible>`:""}`}fireClearSelection(){let e=new CustomEvent("clear-selection",{bubbles:!0,detail:{}});this.dispatchEvent(e)}}customElements.define("site-details",m);customElements.define("app-collapsible",class extends t.LitElement{static get properties(){return{genId:{type:String,attribute:!1},open:{type:Boolean}}}constructor(){super(),this.genId=o()}static get styles(){return t.css`.wrap-collapsible{margin:var(--border-radius) 0}input[type=checkbox]{display:none}.lbl-toggle{display:block;font-weight:var(--font-weight-bold);font-size:var(--font-size-extra-large);text-align:center;padding:var(--border-radius);color:var(--palette-accent);background:var(--palette-light);cursor:pointer;border-radius:var(--border-radius);transition:all .3s cubic-bezier(.755,.05,.855,.06)}.lbl-toggle:hover{color:var(--palette-900)}.lbl-toggle:focus{outline:thin dotted}.collapsible-content{max-height:0;overflow:hidden;transition:max-height .3s cubic-bezier(.86,0,.07,1)}.toggle:checked+.lbl-toggle+.collapsible-content{max-height:var(--collapsible-max-height,3000px)}.toggle:checked+.lbl-toggle{border-bottom-right-radius:0;border-bottom-left-radius:0}.collapsible-content .content-inner{background:var(--palette-white);border-bottom:1px solid var(--palette-light);border-right:1px solid var(--palette-light);border-left:1px solid var(--palette-light);border-bottom-left-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius);padding:var(--font-size)}.collapsible-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between}`}render(){return t.html`<div class=wrap-collapsible><input id=${this.genId} class=toggle type=checkbox ?checked=${this.open} @change=${this._handleChange}> <label for=${this.genId} class=lbl-toggle tabindex=0><div class=collapsible-header><div><slot name=header-before></slot></div><div><slot name=header></slot></div><div><slot name=header-after></slot></div></div></label><div class=collapsible-content><div class=content-inner><slot name=content></slot></div></div></div>`}firstUpdated(){let e=this.renderRoot.querySelectorAll(".lbl-toggle");Array.from(e).forEach(e=>{e.addEventListener("keydown",t=>{32!==t.which&&13!==t.which||(t.preventDefault(),e.click())})})}updated(e){e.has("open")&&n(this,"open",{value:this.open})}_handleChange(e){this.open=e.target.checked}});customElements.define("in-radio",class extends t.LitElement{static get properties(){return{inName:{type:String,attribute:"in-name"},choices:{type:Array},choice:{type:String,reflect:!0}}}constructor(){super(),this.checked=[],this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=o()),e[t]}})()}firstUpdated(){!this.choice&&this.choices&&(this.choice=this.choices[0])}updated(){let e=new CustomEvent("choice-change",{detail:{choice:this.choice}});this.dispatchEvent(e)}inChange(e){this.choice=e.target.value}render(){return t.html`${this.choices.map((e,i)=>t.html`<div class=choice><input type=radio name=${this.inName} id=${this.genId(i)} value=${e} .checked=${this.choice===e} @change=${this.inChange}> <label for=${this.genId(i)}>${e}</label></div>`)}`}});customElements.define("toggle-switch",class extends t.LitElement{static get properties(){return{checked:{type:Boolean}}}constructor(){super(),this.id||(this.id=o())}static get styles(){return t.css`:host{display:flex;justify-content:center;align-items:center}input[type=checkbox]{height:0;width:0;margin:0;visibility:hidden}label{cursor:pointer;text-indent:-9999px;width:calc(2 * var(--icon-size));height:var(--icon-size);background:var(--palette-accent);display:block;border-radius:var(--icon-size);position:relative}label:after{content:'';position:absolute;top:calc(calc(var(--icon-size) - var(--icon-size-small))/ 2);left:calc(calc(var(--icon-size) - var(--icon-size-small))/ 2);width:var(--icon-size-small);height:var(--icon-size-small);background:var(--palette-white);border-radius:var(--icon-size-small);transition:.3s}input:checked+label{background:var(--palette-active)}input:checked+label:after{left:calc(100% - calc(calc(var(--icon-size) - var(--icon-size-small))/ 2));transform:translateX(-100%)}label:active:after{width:calc(var(--icon-size-small) + calc(calc(var(--icon-size) - var(--icon-size-small))/ 2))}`}render(){return t.html`<input type=checkbox id=switch .checked=${this.checked} @change=${this.handleChange}><label for=switch>Toggle</label>`}updated(e){e.has("checked")&&n(this,"change",{checked:this.checked},!0)}handleChange(e){this.checked=e.target.checked}toggle(){this.checked=!this.checked}});class f extends t.LitElement{static get properties(){return{include:{type:Array,attribute:!1},filter:{type:Array,attribute:!1},matchClass:{type:String,attribute:!1}}}static get styles(){return t.css`.field{display:grid;grid-template-columns:40% 1fr;grid-gap:var(--border-radius);margin:0 var(--border-radius)}.label{font-weight:var(--font-weight-bold)}.section-title{margin:var(--line-height) 0 0 0;padding:var(--border-radius);background-color:var(--palette-light)}in-radio{display:inline-grid;grid-template-columns:auto auto}`}updateMatchClass(e){this.matchClass=e.target.choice}render(){return t.html`<style>@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);@import url(https://fonts.googleapis.com/icon?family=Material+Icons);body{font-family:var(--font-family);font-size:var(--font-size);line-height:var(--line-height);background-color:var(--palette-white)}body,h1,h2,h3,h4,h5,p{color:var(--palette-black);font-family:var(--font-family);padding:0;margin:0;box-sizing:border-box}h1,h2,h3,h4,h5{padding:.25em 0 .75em 0;font-weight:var(--font-weight-bold)}h1{font-size:var(--font-size-extra-large);color:var(--palette-accent)}h2{font-size:var(--font-size-large)}p{line-height:1.4em;margin:0 0 1em 0}a{color:var(--palette-900);cursor:pointer;text-decoration-line:underline;text-decoration-style:dashed;text-decoration-color:var(--palette-900)}</style><div>Show sites that have<in-radio choices='["ALL", "ANY"]' @choice-change=${this.updateMatchClass}></in-radio>of the following:</div><div>${this.renderFilterGroups()}</div>`}resolveKeyLookup(e){return h[e]?h[e].title:e}renderFilterGroups(){return this.filterGroups.map(e=>t.html`<app-collapsible ?open=${e.open} @open=${this._handle(e)}><i slot=header-before class=material-icons>expand_more</i> <span slot=header>${e.title}</span> ${e.toggleable?t.html`<toggle-switch name=${e.mapName} slot=header-after ?checked=${e.open} @change=${this._handleGroup(e,this.include)}></toggle-switch>`:""}<div slot=content>${e.sections.map((i,r)=>t.html`${i.title?t.html`<h2 class=section-title>${i.title}</h2>`:""} ${Object.entries(i.fields).map((i,r)=>t.html`<div class=field>${0===i[1].controls.length?"":i[1].controls.map(o=>t.html`<td class=label><label for=${this.genId(r)}>${this.resolveKeyLookup(i[0])}</label></td><td class=selector @change=${this._handleControl(e,o,this.filter)}><input type=hidden id=${o.id} name=${i[0]}> ${o.next}</td>`)}</div>`)}`)}</div></app-collapsible>`)}get _eventHandlers(){return{open:(e,t)=>{e.open=t.detail.value}}}_handle(e){return t=>{const i=this._eventHandlers[t.type];i&&(i(e,t),this.requestUpdate())}}_handleGroup(e,t){const i=e.id,r=e.activate.bind(e);return o=>{const n={};n.id=i,n.toggleable=e.toggleable,n.detail=o.detail,n.prop=e.prop,n.value=e[e.prop],b(t,i);let l=r(n);l&&t.push(l),this.requestUpdate()}}_handleControl(e,t,i){const r=t.id,o=t.handle.bind(t);return t=>{const n={};n.id=r,n.group=e,n.target=t.currentTarget.querySelector("#"+r),n.prop=n.target.name,b(i,r);let l=o(n);l&&i.push(l),this.requestUpdate()}}updated(e){let t=this.matchClass,i=this.include,r=this.filter;window.siteMap&&window.siteMap.map.fire("filterpoints",{detail:{resolve:function(e){let o=i.length>0&&i.reduce((t,i)=>t||i.resolve(e),!1),n=r.filter(t=>t.resolveGroup(e)),l=o&&n.length<1;return o&&!l&&(l="ALL"===t?n.reduce((t,i)=>t&&i.resolve(e),!0):n.reduce((t,i)=>t||i.resolve(e),!1)),l}}})}init(e){this.filterGroups.forEach(t=>{t.sections.forEach(t=>{Object.entries(t.fields).forEach(t=>{t[1].controls.forEach(i=>{i.init&&i.init(e[t[0]])})})})}),this.requestUpdate()}constructor(){super(),this.genId=(function(){const e={};return function(t){return e[t]||(e[t]=o()),e[t]}})(),this.include=[],this.filter=[],this.filterGroups=p}}customElements.define("map-filter",f);const b=(e,t)=>{for(var i=e.findIndex(e=>e.id===t);i>=0;i=e.findIndex(e=>e.id===t))e.splice(i,1)};e.AppSidebar=r,e.MapFilter=f,e.SiteDetails=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
